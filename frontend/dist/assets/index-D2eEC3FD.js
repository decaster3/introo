var js=Object.defineProperty;var gs=(a,i,t)=>i in a?js(a,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[i]=t;var Be=(a,i,t)=>gs(a,typeof i!="symbol"?i+"":i,t);import{r,a as fs,u as Ns,N as ss,L as O,b as xe,c as Qe,d as Je,R as vs,B as ys,e as bs,f as J}from"./vendor-Cck-BZPK.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const o of d)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function t(d){const o={};return d.integrity&&(o.integrity=d.integrity),d.referrerPolicy&&(o.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?o.credentials="include":d.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(d){if(d.ep)return;d.ep=!0;const o=t(d);fetch(d.href,o)}})();var ms={exports:{}},Re={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cs=r,Ss=Symbol.for("react.element"),ws=Symbol.for("react.fragment"),ks=Object.prototype.hasOwnProperty,As=Cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ts={key:!0,ref:!0,__self:!0,__source:!0};function hs(a,i,t){var c,d={},o=null,g=null;t!==void 0&&(o=""+t),i.key!==void 0&&(o=""+i.key),i.ref!==void 0&&(g=i.ref);for(c in i)ks.call(i,c)&&!Ts.hasOwnProperty(c)&&(d[c]=i[c]);if(a&&a.defaultProps)for(c in i=a.defaultProps,i)d[c]===void 0&&(d[c]=i[c]);return{$$typeof:Ss,type:a,key:o,ref:g,props:d,_owner:As.current}}Re.Fragment=ws;Re.jsx=hs;Re.jsxs=hs;ms.exports=Re;var e=ms.exports,He={},as=fs;He.createRoot=as.createRoot,He.hydrateRoot=as.hydrateRoot;function Es(a,i){var t;switch(i.type){case"SET_LOADING":return{...a,isLoading:i.payload};case"SET_AUTH":return{...a,isAuthenticated:i.payload.isAuthenticated,currentUser:i.payload.user,currentUserId:((t=i.payload.user)==null?void 0:t.id)||""};case"LOGOUT":return{...a,isAuthenticated:!1,currentUser:null,currentUserId:"",isCalendarConnected:!1,relationships:[],requests:[],offers:[],contacts:[],companies:[]};case"SET_CURRENT_USER":return{...a,currentUserId:i.payload};case"CONNECT_CALENDAR":return{...a,isCalendarConnected:!0};case"SET_CALENDAR_CONNECTED":return{...a,isCalendarConnected:i.payload};case"SET_RELATIONSHIPS":{const c=i.payload,d=Array.isArray(c)?c:(c==null?void 0:c.data)||[];return{...a,relationships:d}}case"SET_REQUESTS":{const c=i.payload,d=Array.isArray(c)?c:(c==null?void 0:c.data)||[];return{...a,requests:d}}case"ADD_REQUEST":return{...a,requests:[...a.requests||[],i.payload]};case"UPDATE_REQUEST_STATUS":return{...a,requests:(a.requests||[]).map(c=>c.id===i.payload.requestId?{...c,status:i.payload.status}:c)};case"REMOVE_REQUEST":return{...a,requests:(a.requests||[]).filter(c=>c.id!==i.payload),offers:(a.offers||[]).filter(c=>c.requestId!==i.payload)};case"SET_OFFERS":{const c=i.payload,d=Array.isArray(c)?c:(c==null?void 0:c.data)||[];return{...a,offers:d}}case"ADD_OFFER":return{...a,offers:[...a.offers||[],i.payload]};case"UPDATE_OFFER_STATUS":return{...a,offers:(a.offers||[]).map(c=>c.id===i.payload.offerId?{...c,status:i.payload.status}:c)};case"SET_OUTCOME":return{...a,outcomes:[...(a.outcomes||[]).filter(c=>c.requestId!==i.payload.requestId),i.payload]};case"SET_USERS":{const c=i.payload,d=Array.isArray(c)?c:(c==null?void 0:c.data)||[];return{...a,users:d}}case"SET_CONTACTS":{const c=i.payload,d=Array.isArray(c)?c:(c==null?void 0:c.data)||[];return{...a,contacts:d}}case"ADD_CONTACT":return{...a,contacts:[...a.contacts||[],i.payload]};case"SET_COMPANIES":{const c=i.payload,d=Array.isArray(c)?c:(c==null?void 0:c.data)||[];return{...a,companies:d}}case"HYDRATE":return i.payload;default:return a}}const Is="";async function H(a,i={}){const t=await fetch(`${Is}${a}`,{...i,credentials:"include",headers:{"Content-Type":"application/json",...i.headers}});if(!t.ok){const c=await t.json().catch(()=>({error:"Request failed"}));throw new Error(c.error||c.message||"Request failed")}return t.json()}const Pe={getStatus:()=>H("/auth/status"),getMe:()=>H("/auth/me"),logout:()=>H("/auth/logout",{method:"POST"}),getGoogleAuthUrl:()=>"/auth/google"},Ds={getAll:()=>H("/api/users"),getById:a=>H(`/api/users/${a}`),getMyStats:()=>H("/api/users/me/stats")},ns={sync:()=>H("/api/calendar/sync",{method:"POST"}),getStatus:()=>H("/api/calendar/status")},be={getAll:()=>H("/api/relationships"),getMine:()=>H("/api/relationships/mine"),getCompanies:()=>H("/api/relationships/companies"),getContacts:a=>{const i=new URLSearchParams;a!=null&&a.limit&&i.set("limit",a.limit.toString()),a!=null&&a.page&&i.set("page",a.page.toString()),(a==null?void 0:a.approved)!==void 0&&i.set("approved",a.approved.toString());const t=i.toString()?`?${i.toString()}`:"";return H(`/api/relationships/contacts${t}`)}},ts={getAll:()=>H("/api/requests"),getById:a=>H(`/api/requests/${a}`),getMine:()=>H("/api/requests/user/mine"),create:a=>H("/api/requests",{method:"POST",body:JSON.stringify(a)}),updateStatus:(a,i)=>H(`/api/requests/${a}/status`,{method:"PATCH",body:JSON.stringify({status:i})})},is={create:a=>H("/api/offers",{method:"POST",body:JSON.stringify(a)}),updateStatus:(a,i)=>H(`/api/offers/${a}/status`,{method:"PATCH",body:JSON.stringify({status:i})}),getMine:()=>H("/api/offers/mine")},Ps={isAuthenticated:!1,isLoading:!0,currentUser:null,currentUserId:"",isCalendarConnected:!1,relationships:[],requests:[],offers:[],outcomes:[],users:[],contacts:[],companies:[]},Me=r.createContext(null);function $s({children:a}){const[i,t]=r.useReducer(Es,Ps);r.useEffect(()=>{async function b(){try{const{authenticated:E}=await Pe.getStatus();if(E){const{user:D}=await Pe.getMe();t({type:"SET_AUTH",payload:{isAuthenticated:!0,user:D}});const[v,A,R,p,u,f,I]=await Promise.all([Ds.getAll().catch(()=>[]),be.getAll().catch(()=>[]),ts.getAll().catch(()=>[]),is.getMine().catch(()=>[]),be.getContacts({limit:1e3}).catch(()=>({data:[]})),be.getCompanies().catch(()=>[]),ns.getStatus().catch(()=>({isConnected:!1}))]),C=Array.isArray(u)?u:(u==null?void 0:u.data)||[];t({type:"SET_USERS",payload:v}),t({type:"SET_RELATIONSHIPS",payload:A}),t({type:"SET_REQUESTS",payload:R}),t({type:"SET_OFFERS",payload:p}),t({type:"SET_CONTACTS",payload:C}),t({type:"SET_COMPANIES",payload:f}),t({type:"SET_CALENDAR_CONNECTED",payload:I.isConnected}),t({type:"SET_LOADING",payload:!1})}else t({type:"SET_AUTH",payload:{isAuthenticated:!1,user:null}}),t({type:"SET_LOADING",payload:!1})}catch(E){console.error("Failed to initialize:",E),t({type:"SET_AUTH",payload:{isAuthenticated:!1,user:null}}),t({type:"SET_LOADING",payload:!1})}}b()},[]);const c=r.useCallback(()=>{window.location.href=Pe.getGoogleAuthUrl()},[]),d=r.useCallback(async()=>{try{await Pe.logout()}catch(b){console.error("Logout error:",b)}t({type:"LOGOUT"})},[]),o=r.useCallback(async()=>{try{await ns.sync(),t({type:"SET_CALENDAR_CONNECTED",payload:!0});const b=await be.getAll();t({type:"SET_RELATIONSHIPS",payload:b})}catch(b){throw console.error("Calendar sync error:",b),b}},[]),g=r.useCallback(async()=>{try{const[b,E,D]=await Promise.all([be.getAll(),ts.getAll(),is.getMine()]);t({type:"SET_RELATIONSHIPS",payload:b}),t({type:"SET_REQUESTS",payload:E}),t({type:"SET_OFFERS",payload:D})}catch(b){console.error("Failed to refresh data:",b)}},[]);return e.jsx(Me.Provider,{value:{state:i,dispatch:t,login:c,logout:d,syncCalendar:o,refreshData:g},children:a})}function ee(){const a=r.useContext(Me);if(!a)throw new Error("useAppState must be used within AppProvider");return a.state}function Ie(){const a=r.useContext(Me);if(!a)throw new Error("useAppDispatch must be used within AppProvider");return a.dispatch}function Oe(){const a=r.useContext(Me);if(!a)throw new Error("useAppActions must be used within AppProvider");return{login:a.login,logout:a.logout,syncCalendar:a.syncCalendar,refreshData:a.refreshData}}function ce({children:a}){var u;const{currentUser:i,currentUserId:t,isCalendarConnected:c,requests:d,isAuthenticated:o,isLoading:g,contacts:b}=ee(),{logout:E}=Oe(),D=Ns();if(!g&&!o)return e.jsx(ss,{to:"/login",replace:!0});if(g)return e.jsxs("div",{className:"app-layout loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]});const v=Array.isArray(b)&&b.length>0,A=["/onboarding","/connect"].includes(D.pathname);if(b!==void 0&&!v&&!A)return e.jsx(ss,{to:"/onboarding",replace:!0});const R=(d||[]).filter(f=>f.requesterId===t).length,p=[{path:"/home",label:"Find Intros",icon:"üîç"},{path:"/network",label:"Your Network",icon:"üåê"},{path:"/spaces",label:"Your Spaces",icon:"‚ú®"},{path:"/connect",label:"Connect Data",icon:"üìÖ"}];return e.jsxs("div",{className:"app-layout",children:[e.jsxs("aside",{className:"sidebar",children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs(O,{to:"/home",className:"logo",children:[e.jsx("span",{className:"logo-icon",children:"‚ú®"}),e.jsx("span",{className:"logo-text",children:"Introo"})]})}),e.jsx("nav",{className:"sidebar-nav",children:p.map(f=>e.jsxs(O,{to:f.path,className:`nav-item ${D.pathname===f.path?"active":""}`,children:[e.jsx("span",{className:"nav-icon",children:f.icon}),e.jsx("span",{className:"nav-label",children:f.label})]},f.path))}),e.jsxs("div",{className:"sidebar-footer",children:[e.jsxs("div",{className:"connection-status",children:[e.jsx("span",{className:`status-dot ${c?"connected":""}`}),e.jsx("span",{children:c?"Calendar Connected":"Not Connected"})]}),e.jsxs("div",{className:"user-info",children:[i!=null&&i.avatar?e.jsx("img",{src:i.avatar,alt:"",className:"user-avatar-img",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"user-avatar",children:(u=i==null?void 0:i.name)==null?void 0:u.charAt(0)}),e.jsxs("div",{className:"user-details",children:[e.jsx("span",{className:"user-name",children:i==null?void 0:i.name}),e.jsxs("span",{className:"user-stats",children:[R," requests"]})]})]}),e.jsx("button",{className:"logout-btn",onClick:E,children:"Sign Out"})]})]}),e.jsx("main",{className:"main-content",children:a})]})}class Rs extends r.Component{constructor(t){super(t);Be(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});Be(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,c){this.setState({errorInfo:c}),console.error("ErrorBoundary caught an error:",t,c)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"error-boundary",children:e.jsxs("div",{className:"error-boundary-content",children:[e.jsx("div",{className:"error-icon",children:"‚ö†Ô∏è"}),e.jsx("h1",{children:"Something went wrong"}),e.jsx("p",{className:"error-message",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),!1,e.jsxs("div",{className:"error-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:this.handleReset,children:"Try Again"}),e.jsx("button",{className:"btn-primary",onClick:this.handleReload,children:"Reload Page"})]})]})}):this.props.children}}const Ms=[{id:"google",name:"Google Calendar",icon:"üìÖ",description:"Connect your Google Workspace calendar",connected:!1},{id:"outlook",name:"Outlook Calendar",icon:"üìÜ",description:"Connect your Microsoft 365 calendar",connected:!1},{id:"linkedin",name:"LinkedIn",icon:"üíº",description:"Import your professional connections",connected:!1,comingSoon:!0},{id:"gmail",name:"Gmail",icon:"‚úâÔ∏è",description:"Analyze your email communications",connected:!1,comingSoon:!0}];function Os(){const{isCalendarConnected:a}=ee(),{syncCalendar:i}=Oe(),t=xe(),[c,d]=r.useState(null),[o,g]=r.useState(null),[b,E]=r.useState(a?["google"]:[]),D=async A=>{d(A),g(null);try{await i(),E(R=>[...R,A])}catch(R){g(R.message||"Failed to sync calendar")}finally{d(null)}},v=b.length;return e.jsxs("div",{className:"crm-page",children:[e.jsxs("div",{className:"crm-header",children:[e.jsxs("div",{className:"crm-title",children:[e.jsx("h1",{children:"Connect Your Data"}),e.jsxs("p",{className:"crm-subtitle",children:[v," integration",v!==1?"s":""," connected"]})]}),v>0&&e.jsx("button",{className:"btn-primary",onClick:()=>t("/network"),children:"View Network ‚Üí"})]}),e.jsx("div",{className:"crm-layout",children:e.jsxs("div",{className:"crm-content",children:[o&&e.jsxs("div",{className:"connect-error-banner",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," ",o,e.jsx("button",{onClick:()=>g(null),children:"√ó"})]}),e.jsx("div",{className:"integrations-grid",children:Ms.map(A=>{const R=b.includes(A.id),p=c===A.id;return e.jsxs("div",{className:`integration-card ${R?"connected":""} ${A.comingSoon?"coming-soon":""}`,children:[e.jsxs("div",{className:"integration-header",children:[e.jsx("span",{className:"integration-icon",children:A.icon}),R&&e.jsx("span",{className:"connected-badge",children:"‚úì Connected"}),A.comingSoon&&e.jsx("span",{className:"coming-soon-badge",children:"Coming Soon"})]}),e.jsxs("div",{className:"integration-info",children:[e.jsx("h3",{children:A.name}),e.jsx("p",{children:A.description})]}),e.jsx("div",{className:"integration-action",children:R?e.jsx("button",{className:"btn-secondary",disabled:!0,children:"Connected"}):A.comingSoon?e.jsx("button",{className:"btn-secondary",disabled:!0,children:"Coming Soon"}):e.jsx("button",{className:"btn-primary",onClick:()=>D(A.id),disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading-spinner small"}),"Connecting..."]}):"Connect"})})]},A.id)})}),e.jsxs("div",{className:"connect-info-section",children:[e.jsx("h2",{children:"Why connect your data?"}),e.jsxs("div",{className:"info-cards",children:[e.jsxs("div",{className:"info-card",children:[e.jsx("span",{className:"info-icon",children:"üîç"}),e.jsx("h4",{children:"Discover Your Network"}),e.jsx("p",{children:"We analyze your meetings and communications to map your professional relationships."})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("span",{className:"info-icon",children:"ü§ù"}),e.jsx("h4",{children:"Find Warm Intros"}),e.jsx("p",{children:"Get introduced to companies through people you already know and trust."})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("span",{className:"info-icon",children:"üîí"}),e.jsx("h4",{children:"Private & Secure"}),e.jsx("p",{children:"Your data is encrypted and never shared. You control what's visible."})]})]})]})]})})]})}function ps({meetingsCount:a,lastSeenAt:i}){const t=Math.log(1+a),c=(Date.now()-new Date(i).getTime())/(1e3*60*60*24),d=Math.exp(-c/30);return t*d}function Ls({query:a,company:i}){var d;if(a.targetDomain&&i.domain.toLowerCase()===a.targetDomain.toLowerCase())return 3;const t=a.industry&&((d=i.industry)==null?void 0:d.toLowerCase())===a.industry.toLowerCase(),c=a.sizeBucket&&i.sizeBucket===a.sizeBucket;return t&&c?1.5:t?1.2:1}function Fs({query:a,relationships:i,companies:t,users:c,excludeUserId:d}){const o=[];for(const g of i){if(d&&g.userId===d)continue;const b=t.find(u=>u.id===g.companyId),E=c.find(u=>u.id===g.userId);if(!b||!E)continue;const D=ps({meetingsCount:g.meetingsCount,lastSeenAt:g.lastSeenAt}),v=Ls({query:a,company:b}),A=D*v,p=`Connected ${Math.round((Date.now()-new Date(g.lastSeenAt).getTime())/(1e3*60*60*24))} days ago at ${b.domain}`;o.push({userId:E.id,userName:E.name,companyId:b.id,companyDomain:b.domain,companyName:b.name,finalScore:A,explanation:p})}return o.sort((g,b)=>b.finalScore-g.finalScore).slice(0,5)}function qs(a){return a.toFixed(2)}function cs(a){const i=Math.floor((Date.now()-a.getTime())/1e3);if(i<60)return"just now";const t=Math.floor(i/60);if(t<60)return`${t}m ago`;const c=Math.floor(t/60);if(c<24)return`${c}h ago`;const d=Math.floor(c/24);return d<7?`${d}d ago`:a.toLocaleDateString()}function _s(){const{isCalendarConnected:a,relationships:i,currentUserId:t,requests:c,offers:d,currentUser:o,users:g}=ee(),[b,E]=r.useState(!1),D=r.useMemo(()=>{const p=new Map;return i.forEach(u=>{u.company&&!p.has(u.company.id)&&p.set(u.company.id,u.company)}),Array.from(p.values())},[i]);r.useMemo(()=>{const p=[];for(const u of i){if(u.userId===t)continue;const f=u.user||g.find(S=>S.id===u.userId),I=u.company;if(!f||!I)continue;const C=ps(u);p.push({introducer:f,company:I,edge:u,strength:C})}return p.sort((u,f)=>f.strength-u.strength)},[i,t,g]);const v=r.useMemo(()=>{const p=new Map;return i.forEach(u=>{const f=g.find(I=>I.id===u.userId);f&&p.set(f.id,f)}),Array.from(p.values())},[i]),A=r.useMemo(()=>i.filter(p=>p.userId===t),[i,t]),R=r.useMemo(()=>A.filter(p=>p.company).map(p=>p.company).slice(0,20),[A]);return a?e.jsxs("div",{className:"dashboard-page social-feed",children:[e.jsxs("div",{className:"profile-header-card",children:[e.jsx("div",{className:"profile-cover"}),e.jsxs("div",{className:"profile-main",children:[e.jsxs("div",{className:"profile-avatar-section",children:[o!=null&&o.avatar?e.jsx("img",{src:o.avatar,alt:o.name,className:"profile-avatar-large",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"profile-avatar-large fallback",children:o==null?void 0:o.name.charAt(0)}),e.jsx("div",{className:"online-indicator"})]}),e.jsxs("div",{className:"profile-info",children:[e.jsx("h1",{className:"profile-name",children:o==null?void 0:o.name}),e.jsxs("p",{className:"profile-handle",children:["@",o==null?void 0:o.name.toLowerCase().replace(" ","")]})]}),e.jsxs("div",{className:"profile-stats",children:[e.jsxs("div",{className:"profile-stat",children:[e.jsx("span",{className:"stat-number",children:A.length}),e.jsx("span",{className:"stat-label",children:"Connections"})]}),e.jsxs("div",{className:"profile-stat",children:[e.jsx("span",{className:"stat-number",children:c.filter(p=>p.requesterId===t).length}),e.jsx("span",{className:"stat-label",children:"Asks"})]}),e.jsxs("div",{className:"profile-stat",children:[e.jsx("span",{className:"stat-number",children:d.filter(p=>p.introducerId===t).length}),e.jsx("span",{className:"stat-label",children:"Intros Made"})]})]})]})]}),e.jsxs("div",{className:"social-card members-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"card-title-row",children:[e.jsx("span",{className:"card-icon",children:"üë•"}),e.jsx("h2",{children:"Innovators Community"})]}),e.jsxs("span",{className:"member-count",children:[v.length," members"]})]}),e.jsxs("div",{className:"members-grid",children:[(b?v:v.slice(0,8)).map(p=>e.jsxs("div",{className:"member-bubble",children:[p.avatar?e.jsx("img",{src:p.avatar,alt:p.name,className:"member-avatar",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"member-avatar fallback",children:p.name.charAt(0)}),e.jsx("span",{className:"member-name",children:p.name.split(" ")[0]})]},p.id)),v.length>8&&!b&&e.jsx("button",{className:"member-bubble more",onClick:()=>E(!0),children:e.jsxs("span",{className:"more-count",children:["+",v.length-8]})})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"network-stat",children:["üåê Connected to ",e.jsxs("strong",{children:[D.length," companies"]})," & ",e.jsxs("strong",{children:[i.length," connections"]})]})}),e.jsxs("div",{className:"reach-section",children:[e.jsxs("div",{className:"reach-header",children:[e.jsx("span",{className:"card-icon",children:"üåê"}),e.jsx("h3",{children:"Your Reach"})]}),e.jsxs("div",{className:"reach-companies",children:[R.slice(0,12).map(p=>e.jsx("div",{className:"reach-company-bubble",title:p.name,children:p.logo?e.jsx("img",{src:p.logo,alt:p.name}):e.jsx("span",{children:p.name.charAt(0)})},p.id)),R.length>12&&e.jsxs("div",{className:"reach-company-bubble more",children:["+",R.length-12]})]}),e.jsxs("p",{className:"reach-summary",children:["You can intro to ",e.jsxs("strong",{children:[A.length," companies"]})]})]})]}),e.jsxs("div",{className:"social-card create-post-card",children:[e.jsxs("div",{className:"create-post-content",children:[o!=null&&o.avatar?e.jsx("img",{src:o.avatar,alt:"",className:"create-post-avatar",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"create-post-avatar fallback",children:o==null?void 0:o.name.charAt(0)}),e.jsx(O,{to:"/request/new",className:"create-post-input",children:"Who do you want to meet?"})]}),e.jsxs("div",{className:"create-post-actions",children:[e.jsxs(O,{to:"/request/new",className:"post-action-btn",children:[e.jsx("span",{className:"action-icon",children:"üéØ"}),"Ask for Intro"]}),e.jsxs("button",{className:"post-action-btn",disabled:!0,children:[e.jsx("span",{className:"action-icon",children:"ü§ù"}),"Offer Help"]})]})]}),c.filter(p=>p.requesterId===t).length>0&&e.jsxs("div",{className:"social-card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"card-title-row",children:[e.jsx("span",{className:"card-icon",children:"üì§"}),e.jsx("h2",{children:"Your Asks"})]})}),e.jsx("div",{className:"posts-feed",children:c.filter(p=>p.requesterId===t).map(p=>{var C;const u=d.filter(S=>S.requestId===p.id),f=u.find(S=>S.status==="accepted"),I=u.filter(S=>S.status==="pending");return e.jsxs(O,{to:`/request/${p.id}`,className:"post-item your-post",children:[e.jsxs("div",{className:"post-header",children:[o!=null&&o.avatar?e.jsx("img",{src:o.avatar,alt:"",className:"post-avatar",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"post-avatar fallback",children:o==null?void 0:o.name.charAt(0)}),e.jsxs("div",{className:"post-meta",children:[e.jsx("span",{className:"post-author",children:"You"}),e.jsx("span",{className:"post-time",children:cs(new Date(p.createdAt))})]}),e.jsxs("div",{className:"post-bounty",children:["$",p.bidAmount]})]}),e.jsx("p",{className:"post-content",children:p.rawText}),e.jsx("div",{className:"post-footer",children:e.jsxs("div",{className:"post-status-row",children:[e.jsxs("span",{className:`post-status ${p.status}`,children:[p.status==="open"&&"üü¢ Open",p.status==="accepted"&&"ü§ù In Progress",p.status==="completed"&&"‚úÖ Done"]}),f?e.jsxs("span",{className:"post-engagement",children:["‚ú® ",(C=g.find(S=>S.id===f.introducerId))==null?void 0:C.name," is helping"]}):I.length>0?e.jsxs("span",{className:"post-engagement highlight",children:["üí¨ ",I.length," ",I.length===1?"offer":"offers"," received"]}):e.jsx("span",{className:"post-engagement muted",children:"Waiting for offers..."})]})})]},p.id)})})]}),e.jsxs("div",{className:"social-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"card-title-row",children:[e.jsx("span",{className:"card-icon",children:"üéØ"}),e.jsx("h2",{children:"Help Someone Out"})]}),e.jsx(O,{to:"/feed",className:"see-all-link",children:"See all ‚Üí"})]}),e.jsx("div",{className:"posts-feed",children:(()=>{const p=c.filter(u=>u.requesterId!==t&&u.status==="open").map(u=>{const f=g.find(T=>T.id===u.requesterId),I=A.find(T=>{var F,l,h;const L=T.company;return L?!!((F=u.normalizedQuery)!=null&&F.targetDomain&&((l=L.domain)!=null&&l.includes(u.normalizedQuery.targetDomain))||(h=u.normalizedQuery)!=null&&h.industry&&L.industry===u.normalizedQuery.industry):!1});if(!I)return null;const C=I.company,S=Math.round((Date.now()-new Date(I.lastSeenAt).getTime())/(1e3*60*60*24)),k=d.some(T=>T.requestId===u.id&&T.introducerId===t);return{request:u,requester:f,matchedCompany:C,myMatch:I,daysSinceLast:S,hasOffer:k}}).filter(Boolean);return p.length===0?e.jsxs("div",{className:"empty-feed",children:[e.jsx("span",{className:"empty-icon",children:"üå±"}),e.jsx("p",{children:"No asks match your network yet"}),e.jsx("p",{className:"empty-hint",children:"When someone needs a connection you have, it'll show up here"})]}):p.map(({request:u,requester:f,matchedCompany:I,daysSinceLast:C,hasOffer:S})=>{var k;return e.jsxs("div",{className:"post-item ask-post",children:[e.jsxs("div",{className:"post-header",children:[f!=null&&f.avatar?e.jsx("img",{src:f.avatar,alt:"",className:"post-avatar",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"post-avatar fallback",children:f==null?void 0:f.name.charAt(0)}),e.jsxs("div",{className:"post-meta",children:[e.jsx("span",{className:"post-author",children:f==null?void 0:f.name}),e.jsx("span",{className:"post-time",children:cs(new Date(u.createdAt))})]}),e.jsxs("div",{className:"post-bounty",children:["$",u.bidAmount]})]}),e.jsx("p",{className:"post-content",children:u.rawText}),e.jsxs("div",{className:"you-know-section",children:[e.jsx("span",{className:"you-know-label",children:"üí° You know someone!"}),e.jsxs("div",{className:"connection-preview",children:[I!=null&&I.logo?e.jsx("img",{src:I.logo,alt:"",className:"connection-company-logo"}):e.jsx("div",{className:"connection-avatar fallback",children:(k=I==null?void 0:I.name)==null?void 0:k.charAt(0)}),e.jsxs("div",{className:"connection-details",children:[e.jsx("span",{className:"connection-name",children:I==null?void 0:I.name}),e.jsxs("span",{className:"connection-last",children:["Last contact ",C,"d ago"]})]})]})]}),e.jsxs("div",{className:"post-actions",children:[S?e.jsx("span",{className:"action-done",children:"‚úì You offered to help"}):e.jsx(O,{to:`/request/${u.id}`,className:"action-btn primary",children:"ü§ù Offer to Intro"}),e.jsx("button",{className:"action-btn secondary",disabled:!0,children:"üí¨ Comment"})]})]},u.id)})})()})]})]}):e.jsx("div",{className:"dashboard-page",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("h2",{children:"Calendar Not Connected"}),e.jsx("p",{children:"Connect your calendar to see your network relationships."}),e.jsx(O,{to:"/connect",className:"btn-primary",children:"Connect Calendar"})]})})}const zs=/\b([a-z0-9-]+\.(com|io|co|org|net|so|ai|dev))\b/gi,Ws={saas:["saas","software","productivity","collaboration","crm","erp"],fintech:["fintech","payments","banking","finance","financial","crypto"],healthcare:["healthcare","health","medical","biotech","pharma"],security:["security","cybersecurity","infosec","identity","authentication"]},Bs={"1-10":["1-10","tiny","very small","micro","pre-seed","preseed"],"11-50":["11-50","small","seed","early stage","early-stage"],"51-200":["51-200","medium","mid-size","series a","series-a"],"200-1000":["200-1000","large","growth","series b","series-b","series c","series-c"],"1000+":["1000+","1000 plus","enterprise","public","huge","unicorn"]},Ys={US:["us","usa","united states","america","american","sf","nyc","silicon valley"],EU:["eu","europe","european","germany","france","berlin","paris","amsterdam"],UK:["uk","united kingdom","britain","british","london","england"]},Gs={ceo:["ceo","chief executive","founder","co-founder"],cto:["cto","chief technology","tech lead","vp engineering"],cfo:["cfo","chief financial","finance"],sales:["sales","account executive","ae","sdr","bdr"],product:["product","pm","product manager","head of product"],engineering:["engineer","developer","swe","software engineer"]};function $e(a,i){const t=a.toLowerCase();for(const[c,d]of Object.entries(i))for(const o of d)if(t.includes(o))return c}function Us(a){const i={},t=a.match(zs);return t&&t.length>0&&(i.targetDomain=t[0].toLowerCase()),i.industry=$e(a,Ws),i.sizeBucket=$e(a,Bs),i.geo=$e(a,Ys),i.role=$e(a,Gs),i}function Hs(){const{currentUserId:a,relationships:i,users:t,companies:c}=ee(),d=Ie(),o=xe(),[g]=Qe(),b=g.get("text")||"",E=g.get("spaceId")||"",[D,v]=r.useState(b),[A,R]=r.useState(100),[p,u]=r.useState("USD"),[f,I]=r.useState(null),[C,S]=r.useState([]),[k,T]=r.useState("compose"),[,L]=r.useState(!1),F=()=>{const h=Us(D);I(h);const w=Fs({query:h,relationships:i,companies:c,users:t,excludeUserId:a});S(w),T("preview")},l=async()=>{if(f){L(!0);try{const h=await fetch("/api/requests",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({rawText:D,normalizedQuery:f,bidAmount:A,currency:p,spaceId:E||void 0})});if(!h.ok)throw new Error("Failed to create request");const w=await h.json();d({type:"ADD_REQUEST",payload:{id:w.id,requesterId:a,rawText:D,normalizedQuery:f,bidAmount:A,currency:p,status:"open",createdAt:new Date().toISOString(),spaceId:E||void 0}}),o(E?`/spaces/${E}`:`/request/${w.id}`)}catch(h){console.error("Error creating request:",h),alert("Failed to create request")}finally{L(!1)}}};return e.jsxs("div",{className:"new-request-page",children:[e.jsxs("header",{className:"page-header",children:[e.jsx("h1",{children:"Create Intro Request"}),e.jsx("p",{className:"subtitle",children:"Describe who you want to meet and we'll find the best introducers."})]}),k==="compose"&&e.jsxs("div",{className:"compose-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"rawText",children:"Who do you want to meet?"}),e.jsx("textarea",{id:"rawText",value:D,onChange:h=>v(h.target.value),placeholder:"e.g., Looking for an intro to someone at stripe.com, ideally in engineering or product. US-based fintech companies 1000+ employees work too.",rows:5}),e.jsx("p",{className:"form-hint",children:"Be specific! Mention company domains, industries (saas, fintech, healthcare, security), company size, geography, and roles."})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"bidAmount",children:"Bounty Amount"}),e.jsx("input",{id:"bidAmount",type:"number",value:A,onChange:h=>R(Number(h.target.value)),min:0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"currency",children:"Currency"}),e.jsxs("select",{id:"currency",value:p,onChange:h=>u(h.target.value),children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"})]})]})]}),e.jsx("button",{className:"btn-primary btn-large",onClick:F,disabled:!D.trim(),children:"Analyze & Find Matches"})]}),k==="preview"&&f&&e.jsxs("div",{className:"preview-section",children:[e.jsxs("div",{className:"query-analysis",children:[e.jsx("h2",{children:"Parsed Query"}),e.jsxs("div",{className:"query-tags",children:[f.targetDomain&&e.jsxs("span",{className:"query-tag domain",children:[e.jsx("strong",{children:"Domain:"})," ",f.targetDomain]}),f.industry&&e.jsxs("span",{className:"query-tag industry",children:[e.jsx("strong",{children:"Industry:"})," ",f.industry]}),f.sizeBucket&&e.jsxs("span",{className:"query-tag size",children:[e.jsx("strong",{children:"Size:"})," ",f.sizeBucket]}),f.geo&&e.jsxs("span",{className:"query-tag geo",children:[e.jsx("strong",{children:"Geo:"})," ",f.geo]}),f.role&&e.jsxs("span",{className:"query-tag role",children:[e.jsx("strong",{children:"Role:"})," ",f.role]}),!f.targetDomain&&!f.industry&&!f.sizeBucket&&!f.geo&&!f.role&&e.jsx("span",{className:"query-tag empty",children:"No specific criteria detected"})]})]}),e.jsxs("div",{className:"matches-section",children:[e.jsxs("h2",{children:["Top Matches (",C.length,")"]}),C.length===0?e.jsx("p",{className:"no-matches",children:"No matches found. Try broadening your criteria."}):e.jsx("div",{className:"matches-list",children:C.map((h,w)=>e.jsxs("div",{className:"match-card",children:[e.jsxs("div",{className:"match-rank",children:["#",w+1]}),e.jsxs("div",{className:"match-info",children:[e.jsxs("div",{className:"match-header",children:[e.jsx("span",{className:"introducer-name",children:h.userName}),e.jsx("span",{className:"match-arrow",children:"‚Üí"}),e.jsx("span",{className:"company-name",children:h.companyName})]}),e.jsx("p",{className:"match-explanation",children:h.explanation})]}),e.jsxs("div",{className:"match-score",children:[e.jsx("span",{className:"score-value",children:qs(h.finalScore)}),e.jsx("span",{className:"score-label",children:"score"})]})]},`${h.userId}-${h.companyId}`))})]}),e.jsxs("div",{className:"preview-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>T("compose"),children:"‚Üê Edit Request"}),e.jsxs("button",{className:"btn-primary btn-large",onClick:l,children:["Submit Request (",A," ",p,")"]})]})]})]})}function rs(a){const i=Math.floor((Date.now()-a.getTime())/1e3);if(i<60)return"just now";const t=Math.floor(i/60);if(t<60)return`${t}m ago`;const c=Math.floor(t/60);if(c<24)return`${c}h ago`;const d=Math.floor(c/24);return d<7?`${d}d ago`:`${Math.floor(d/7)}w ago`}function Qs(a,i){const t=Math.floor((Date.now()-new Date(a).getTime())/864e5);return t<=7&&i>=3?"strong":t<=30&&i>=2?"medium":"weak"}function Js(){var z,q;const{id:a}=Je(),i=xe(),{currentUser:t,requests:c,offers:d,users:o,contacts:g}=ee(),b=Ie(),[E,D]=r.useState(!1),[v,A]=r.useState(""),[R,p]=r.useState({}),[u,f]=r.useState(!1),I=r.useMemo(()=>g.filter(N=>N.isApproved).map(N=>{var M,G;return{id:N.id,name:N.name||"Unknown",email:N.email,avatar:`https://i.pravatar.cc/150?u=${N.email}`,title:N.title||"",company:((M=N.company)==null?void 0:M.name)||"",companyDomain:((G=N.company)==null?void 0:G.domain)||"",lastContacted:new Date(N.lastSeenAt),connectionStrength:Qs(N.lastSeenAt,N.meetingsCount)}}),[g]);r.useEffect(()=>{fetch("/api/spaces",{credentials:"include"}).then(N=>N.json()).then(N=>{const M={};N.forEach(G=>{G.members.forEach(x=>{M[x.user.id]={id:G.id,name:G.name,emoji:G.emoji}})}),p(M)}).catch(N=>{console.error("Failed to fetch spaces for user mapping:",N)})},[]);const C=c.find(N=>N.id===a),S=r.useMemo(()=>d.filter(N=>N.requestId===a),[d,a]),k=C?o.find(N=>N.id===C.requesterId):null,T=(C==null?void 0:C.requesterId)===(t==null?void 0:t.id),L=r.useMemo(()=>{var N;return(N=C==null?void 0:C.normalizedQuery)!=null&&N.targetDomain?I.filter(M=>M.companyDomain===C.normalizedQuery.targetDomain):[]},[C,I]);if(!C)return e.jsx("div",{className:"request-detail",children:e.jsxs("div",{className:"detail-empty",children:[e.jsx("h2",{children:"Request Not Found"}),e.jsx("button",{className:"btn-primary",onClick:()=>i(-1),children:"Go Back"})]})});const F=()=>{v.trim()&&(b({type:"ADD_OFFER",payload:{id:`offer-${Date.now()}`,requestId:C.id,introducerId:(t==null?void 0:t.id)||"",message:v,status:"pending",createdAt:new Date().toISOString()}}),A(""),D(!1))},l=N=>{b({type:"UPDATE_OFFER_STATUS",payload:{offerId:N,status:"accepted"}}),b({type:"UPDATE_REQUEST_STATUS",payload:{requestId:C.id,status:"accepted"}})},h=N=>{b({type:"UPDATE_OFFER_STATUS",payload:{offerId:N,status:"rejected"}})},w=async()=>{if(!(!C||!confirm("Are you sure you want to delete this request? This cannot be undone."))){f(!0);try{const N=await fetch(`/api/requests/${C.id}`,{method:"DELETE",credentials:"include"});if(!N.ok){const M=await N.json();throw new Error(M.error||"Failed to delete request")}b({type:"REMOVE_REQUEST",payload:C.id}),i("/home")}catch(N){console.error("Delete error:",N),alert(N instanceof Error?N.message:"Failed to delete request"),f(!1)}}},P=S.some(N=>N.introducerId===(t==null?void 0:t.id));return e.jsxs("div",{className:"request-detail",children:[e.jsxs("div",{className:"detail-header",children:[e.jsx("button",{className:"back-link",onClick:()=>i(-1),children:"‚Üê Back"}),T&&e.jsx("button",{className:"btn-danger",onClick:w,disabled:u,children:u?"Deleting...":"Delete Request"})]}),e.jsxs("div",{className:"detail-layout",children:[e.jsxs("div",{className:"detail-main",children:[e.jsxs("div",{className:"detail-card",children:[e.jsxs("div",{className:"detail-card-header",children:[e.jsxs("div",{className:"requester-row",children:[k!=null&&k.avatar?e.jsx("img",{src:k.avatar,alt:"",className:"detail-avatar",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"detail-avatar fallback",children:(z=k==null?void 0:k.name)==null?void 0:z.charAt(0)}),e.jsxs("div",{className:"requester-details",children:[e.jsx("span",{className:"requester-name",children:T?"You":k==null?void 0:k.name}),!T&&(k==null?void 0:k.id)&&R[k.id]&&e.jsxs("span",{className:"space-tag",children:[e.jsx("span",{className:"space-emoji",children:R[k.id].emoji}),R[k.id].name]}),e.jsx("span",{className:"request-time",children:rs(new Date(C.createdAt))})]})]}),e.jsxs("div",{className:"detail-badges",children:[e.jsx("span",{className:`status-badge ${C.status}`,children:C.status}),C.bidAmount>0&&e.jsxs("span",{className:"bounty-badge",children:["$",C.bidAmount]})]})]}),e.jsx("p",{className:"detail-text",children:C.rawText}),((q=C.normalizedQuery)==null?void 0:q.targetDomain)&&e.jsxs("div",{className:"detail-target",children:[e.jsx("span",{className:"target-label",children:"Looking for:"}),e.jsx("span",{className:"target-company",children:C.normalizedQuery.targetDomain})]}),C.space&&e.jsxs("div",{className:"detail-space",children:["Posted in ",e.jsxs(O,{to:`/spaces/${C.space.id}`,className:"space-link",children:[C.space.emoji," ",C.space.name]})]})]}),!T&&L.length>0&&e.jsxs("div",{className:"matching-contacts-card",children:[e.jsx("h3",{children:"You might be able to help!"}),e.jsxs("p",{className:"matching-subtitle",children:["You know ",L.length," ",L.length===1?"person":"people"," at this company"]}),e.jsx("div",{className:"matching-list",children:L.map(N=>e.jsxs("div",{className:"matching-contact",children:[e.jsx("img",{src:N.avatar,alt:"",className:"matching-avatar"}),e.jsxs("div",{className:"matching-info",children:[e.jsx("span",{className:"matching-name",children:N.name}),e.jsxs("span",{className:"matching-title",children:[N.title," at ",N.company]})]}),e.jsx("span",{className:`strength-badge ${N.connectionStrength}`,children:N.connectionStrength})]},N.id))}),!P&&C.status==="open"&&e.jsx("button",{className:"btn-primary full-width",onClick:()=>D(!0),children:"Offer to Introduce"})]}),E&&e.jsxs("div",{className:"offer-form-card",children:[e.jsx("h3",{children:"Make an Offer"}),e.jsx("p",{className:"form-hint",children:"Describe your connection and how you can help"}),e.jsx("textarea",{value:v,onChange:N=>A(N.target.value),placeholder:"I know [Name] at [Company]. We worked together at... I can introduce you because...",rows:4}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>D(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:F,disabled:!v.trim(),children:"Submit Offer"})]})]})]}),e.jsx("div",{className:"detail-sidebar",children:e.jsxs("div",{className:"sidebar-card",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h3",{children:"Offers"}),e.jsx("span",{className:"offer-count",children:S.length})]}),S.length===0?e.jsxs("div",{className:"no-offers",children:[e.jsx("p",{children:"No offers yet"}),!T&&!P&&C.status==="open"&&!E&&e.jsx("button",{className:"btn-secondary",onClick:()=>D(!0),children:"Be the first to help"})]}):e.jsx("div",{className:"offers-list",children:S.map(N=>{var x;const M=o.find(W=>W.id===N.introducerId),G=N.introducerId===(t==null?void 0:t.id);return e.jsxs("div",{className:`offer-card ${N.status}`,children:[e.jsxs("div",{className:"offer-header",children:[e.jsxs("div",{className:"offer-user",children:[M!=null&&M.avatar?e.jsx("img",{src:M.avatar,alt:"",className:"offer-avatar"}):e.jsx("div",{className:"offer-avatar fallback",children:(x=M==null?void 0:M.name)==null?void 0:x.charAt(0)}),e.jsxs("div",{className:"offer-user-info",children:[e.jsx("span",{className:"offer-user-name",children:G?"You":M==null?void 0:M.name}),e.jsx("span",{className:"offer-time",children:rs(new Date(N.createdAt))})]})]}),e.jsx("span",{className:`status-badge ${N.status}`,children:N.status})]}),e.jsx("p",{className:"offer-message",children:N.message}),T&&N.status==="pending"&&e.jsxs("div",{className:"offer-actions",children:[e.jsx("button",{className:"btn-reject",onClick:()=>h(N.id),children:"Decline"}),e.jsx("button",{className:"btn-accept",onClick:()=>l(N.id),children:"Accept"})]})]},N.id)})})]})})]})]})}function Vs(){const{isAuthenticated:a,isLoading:i}=ee(),{login:t}=Oe(),c=xe(),[d]=Qe(),o=d.get("error");return r.useEffect(()=>{a&&!i&&c("/home")},[a,i,c]),i?e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-card",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]})}):e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-logo",children:[e.jsx("span",{className:"logo-icon",children:"üîó"}),e.jsx("h1",{children:"Introo"})]}),e.jsx("p",{className:"login-tagline",children:"Your professional network, supercharged"}),o&&e.jsx("div",{className:"login-error",children:"Authentication failed. Please try again."}),e.jsxs("button",{className:"google-login-btn",onClick:t,children:[e.jsxs("svg",{viewBox:"0 0 24 24",className:"google-icon",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),e.jsx("p",{className:"login-note",children:"We'll connect to your Google Calendar to discover your professional network"}),e.jsxs("div",{className:"login-legal",children:[e.jsx(O,{to:"/terms",children:"Terms of Use"}),e.jsx("span",{children:"¬∑"}),e.jsx(O,{to:"/privacy",children:"Privacy Policy"})]})]})})}function Ks(){const{currentUser:a,contacts:i}=ee(),t=Ie(),{syncCalendar:c}=Oe(),d=xe(),o=r.useRef(null),[g,b]=r.useState(!1),[E,D]=r.useState(null),[v,A]=r.useState([]),[R,p]=r.useState("choose");if(i&&i.length>0&&R==="choose")return d("/dashboard"),null;const u=async()=>{var S;b(!0),D(null);try{await c();const k=await be.getContacts({limit:1e3}),T=Array.isArray(k)?k:(k==null?void 0:k.data)||[];if(!Array.isArray(T))throw console.error("Unexpected contacts response format:",k),new Error("Failed to load contacts. Please try again.");const L=((S=k==null?void 0:k.pagination)==null?void 0:S.total)||T.length;console.log(`Loaded ${T.length} of ${L} contacts`);const F=T.map(l=>({id:l.id,email:l.email,name:l.name||null,title:l.title||null,isApproved:!0,meetingsCount:l.meetingsCount||1,lastSeenAt:l.lastSeenAt||new Date().toISOString(),company:l.company?{id:l.company.id,domain:l.company.domain,name:l.company.name,logo:l.company.logo||`https://www.google.com/s2/favicons?domain=${l.company.domain}&sz=128`}:null}));if(F.length===0){D("No contacts found in your calendar. Try uploading a CSV instead."),b(!1);return}A(F),p("review")}catch(k){console.error("Calendar sync error:",k);const T=k.message||"Failed to connect calendar. Please try again.";T.includes("expired")||T.includes("sign in")||k.needsReauth?D("Calendar access expired. Please sign out and sign in again to reconnect your calendar."):D(T)}finally{b(!1)}},f=S=>{var L;const k=(L=S.target.files)==null?void 0:L[0];if(!k)return;b(!0),D(null);const T=new FileReader;T.onload=F=>{var l;try{const w=((l=F.target)==null?void 0:l.result).split(`
`).filter(x=>x.trim());if(w.length<2)throw new Error("CSV must have a header row and at least one contact");const P=w[0].toLowerCase().split(",").map(x=>x.trim()),z=P.findIndex(x=>x.includes("email")),q=P.findIndex(x=>x.includes("name")&&!x.includes("company")),N=P.findIndex(x=>x.includes("title")||x.includes("role")||x.includes("position")),M=P.findIndex(x=>x.includes("company")||x.includes("organization"));if(z===-1)throw new Error('CSV must have an "email" column');const G=[];for(let x=1;x<w.length;x++){const W=w[x].split(",").map(te=>te.trim().replace(/^"|"$/g,"")),Y=W[z];if(!Y||!Y.includes("@"))continue;const Q=q!==-1?W[q]:Y.split("@")[0],se=N!==-1?W[N]:null,de=M!==-1?W[M]:null,ne=Y.split("@")[1];G.push({id:`csv-${Date.now()}-${x}`,email:Y,name:Q||null,title:se||null,isApproved:!0,meetingsCount:1,lastSeenAt:new Date().toISOString(),company:de?{id:`company-${ne}`,domain:ne,name:de,logo:`https://www.google.com/s2/favicons?domain=${ne}&sz=128`}:null})}if(G.length===0)throw new Error("No valid contacts found in CSV");A(G),p("review")}catch(h){D(h.message||"Failed to parse CSV")}finally{b(!1)}},T.onerror=()=>{D("Failed to read file"),b(!1)},T.readAsText(k)},I=()=>{const S=localStorage.getItem("spaces_contacts");let k=[];try{k=S?JSON.parse(S):[]}catch(L){console.warn("Failed to parse saved contacts, resetting:",L)}const T=[...k,...v];localStorage.setItem("spaces_contacts",JSON.stringify(T)),v.forEach(L=>{t({type:"ADD_CONTACT",payload:L})}),p("complete"),setTimeout(()=>d("/network"),1500)},C=()=>{const S={id:`placeholder-${Date.now()}`,email:(a==null?void 0:a.email)||"user@example.com",name:(a==null?void 0:a.name)||"You",title:null,isApproved:!0,meetingsCount:0,lastSeenAt:new Date().toISOString(),company:null};localStorage.setItem("spaces_contacts",JSON.stringify([S])),t({type:"ADD_CONTACT",payload:S}),d("/network")};return R==="complete"?e.jsx("div",{className:"onboarding-page",children:e.jsxs("div",{className:"onboarding-card",children:[e.jsx("div",{className:"onboarding-icon success",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),e.jsx("h1",{children:"You're All Set!"}),e.jsxs("p",{className:"onboarding-description",children:["Added ",v.length," contacts to your network. Redirecting..."]}),e.jsx("div",{className:"loading-spinner"})]})}):R==="review"?e.jsx("div",{className:"onboarding-page",children:e.jsxs("div",{className:"onboarding-card wide",children:[e.jsx("button",{className:"back-btn",onClick:()=>p("choose"),children:"‚Üê Back"}),e.jsx("h1",{children:"Review Your Contacts"}),e.jsxs("p",{className:"onboarding-description",children:["We found ",e.jsxs("strong",{children:[v.length," contacts"]}),". These will be added to your network."]}),e.jsx("div",{className:"contacts-list",children:v.map(S=>{var k,T;return e.jsxs("div",{className:"contact-item selected",children:[e.jsx("div",{className:"contact-avatar",children:(k=S.company)!=null&&k.logo?e.jsx("img",{src:S.company.logo,alt:""}):e.jsx("span",{children:(S.name||S.email).charAt(0).toUpperCase()})}),e.jsxs("div",{className:"contact-info",children:[e.jsx("div",{className:"contact-name",children:S.name||S.email}),e.jsxs("div",{className:"contact-details",children:[((T=S.company)==null?void 0:T.name)&&e.jsx("span",{className:"contact-company",children:S.company.name}),S.title&&e.jsx("span",{className:"contact-title",children:S.title})]})]})]},S.id)})}),e.jsxs("div",{className:"onboarding-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>p("choose"),children:"Cancel"}),e.jsxs("button",{className:"btn-primary btn-large",onClick:I,children:["Add ",v.length," Contacts"]})]})]})}):e.jsx("div",{className:"onboarding-page",children:e.jsxs("div",{className:"onboarding-card",children:[e.jsxs("div",{className:"onboarding-logo",children:[e.jsx("span",{className:"logo-icon",children:"‚ú®"}),e.jsx("h1",{children:"Welcome to Introo"})]}),e.jsx("p",{className:"onboarding-description",children:"Build your professional network by connecting your calendar or uploading your contacts."}),E&&e.jsxs("div",{className:"onboarding-error",children:[E,(E.toLowerCase().includes("expired")||E.toLowerCase().includes("sign in")||E.toLowerCase().includes("reconnect"))&&e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("a",{href:"http://localhost:3001/auth/logout",className:"btn-secondary",children:"Sign Out"}),e.jsx("a",{href:"http://localhost:3001/auth/google",className:"btn-primary",children:"Sign In Again"})]})]}),e.jsxs("div",{className:"onboarding-options",children:[e.jsxs("button",{className:"onboarding-option-card",onClick:u,disabled:g,children:[e.jsx("div",{className:"option-icon",children:"üìÖ"}),e.jsxs("div",{className:"option-content",children:[e.jsx("h3",{children:"Connect Calendar"}),e.jsx("p",{children:"We'll scan your meetings to find your professional contacts"})]}),g&&e.jsx("span",{className:"loading-spinner small"})]}),e.jsx("div",{className:"option-divider",children:e.jsx("span",{children:"or"})}),e.jsxs("button",{className:"onboarding-option-card",onClick:()=>{var S;return(S=o.current)==null?void 0:S.click()},disabled:g,children:[e.jsx("div",{className:"option-icon",children:"üìÑ"}),e.jsxs("div",{className:"option-content",children:[e.jsx("h3",{children:"Upload CSV"}),e.jsx("p",{children:"Import contacts from a spreadsheet with work emails"})]})]}),e.jsx("input",{ref:o,type:"file",accept:".csv",onChange:f,style:{display:"none"}}),e.jsx("p",{className:"csv-hint",children:"CSV should have columns: email, name (optional), title (optional), company (optional)"})]}),e.jsx("div",{className:"onboarding-footer",children:e.jsx("button",{className:"btn-text",onClick:C,children:"Skip for now ‚Üí"})}),e.jsx("p",{className:"privacy-note",children:"üîí Your data stays private. We never share your contacts."})]})})}function Zs(){const{currentUser:a}=ee(),[i,t]=r.useState([]),[c,d]=r.useState(!0),[o,g]=r.useState(!1),[b,E]=r.useState(!1),[D,v]=r.useState(null),[A,R]=r.useState(""),[p,u]=r.useState("recent"),[f,I]=r.useState(""),[C,S]=r.useState("ü´õ"),[k,T]=r.useState(""),[L,F]=r.useState(""),[l,h]=r.useState("");r.useEffect(()=>{w()},[]);const w=async()=>{try{const W=await(await fetch("/api/spaces",{credentials:"include"})).json();t(W)}catch(x){console.error("Failed to fetch spaces:",x)}finally{d(!1)}},P=async()=>{if(f.trim())try{await fetch("/api/spaces",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:f,emoji:C,description:k||null})}),I(""),S("ü´õ"),T(""),g(!1),w()}catch(x){console.error("Failed to create space:",x)}},z=async()=>{if(L.trim())try{if(!(await fetch(`/api/spaces/join/${L}`,{method:"POST",credentials:"include"})).ok)throw new Error("Invalid code");F(""),E(!1),w()}catch(x){console.error("Failed to join space:",x)}},q=async x=>{if(l.trim())try{await fetch(`/api/spaces/${x}/members`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:l})}),h(""),v(null),w()}catch(W){console.error("Failed to invite member:",W)}},N=async x=>{try{await fetch(`/api/spaces/${x}/leave`,{method:"POST",credentials:"include"}),w()}catch(W){console.error("Failed to leave space:",W)}},M=x=>{navigator.clipboard.writeText(x)},G=r.useMemo(()=>{let x=[...i];if(A){const W=A.toLowerCase();x=x.filter(Y=>{var Q;return Y.name.toLowerCase().includes(W)||((Q=Y.description)==null?void 0:Q.toLowerCase().includes(W))})}return x.sort((W,Y)=>p==="members"?Y.members.length-W.members.length:p==="name"?W.name.localeCompare(Y.name):0)},[i,A,p]);return c?e.jsx("div",{className:"crm-page",children:e.jsx("div",{className:"loading-state",children:"Loading spaces..."})}):e.jsxs("div",{className:"crm-page",children:[e.jsxs("div",{className:"crm-header",children:[e.jsxs("div",{className:"crm-title",children:[e.jsx("h1",{children:"Your Spaces"}),e.jsxs("p",{className:"crm-subtitle",children:[i.length," space",i.length!==1?"s":""]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>E(!0),children:"Join Space"}),e.jsx(O,{to:"/spaces/new",className:"btn-primary",children:"+ Create Space"})]})]}),e.jsxs("div",{className:"crm-content",children:[e.jsxs("div",{className:"crm-toolbar",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("span",{className:"search-icon",children:"üîç"}),e.jsx("input",{type:"text",placeholder:"Search spaces...",value:A,onChange:x=>R(x.target.value)})]}),e.jsxs("div",{className:"sort-controls",children:[e.jsx("button",{className:`sort-btn ${p==="recent"?"active":""}`,onClick:()=>u("recent"),children:"Recent"}),e.jsx("button",{className:`sort-btn ${p==="members"?"active":""}`,onClick:()=>u("members"),children:"Members"}),e.jsx("button",{className:`sort-btn ${p==="name"?"active":""}`,onClick:()=>u("name"),children:"A-Z"})]})]}),G.length===0?e.jsxs("div",{className:"empty-network",children:[e.jsx("div",{className:"empty-icon",children:"‚ú®"}),e.jsx("h2",{children:i.length===0?"No spaces yet":"No results"}),e.jsx("p",{children:i.length===0?"Create a space or join one with an invite code":"Try a different search term"})]}):e.jsx("div",{className:"spaces-grid",children:G.map(x=>{const W=x.ownerId===(a==null?void 0:a.id);return e.jsxs("div",{className:"space-card-simple",children:[e.jsxs(O,{to:`/spaces/${x.id}`,className:"space-card-header clickable",children:[e.jsx("span",{className:"space-emoji-large",children:x.emoji}),e.jsxs("div",{className:"space-card-info",children:[e.jsx("h3",{children:x.name}),e.jsxs("p",{className:"space-member-count",children:[x.members.length," member",x.members.length!==1?"s":""]})]}),W&&e.jsx("span",{className:"owner-badge",children:"Owner"})]}),x.description&&e.jsx("p",{className:"space-description",children:x.description}),e.jsxs("div",{className:"space-members-row",children:[x.members.slice(0,5).map(Y=>e.jsx("div",{className:"member-bubble-small",title:Y.user.name,children:Y.user.avatar?e.jsx("img",{src:Y.user.avatar,alt:"",referrerPolicy:"no-referrer"}):e.jsx("span",{children:Y.user.name.charAt(0)})},Y.id)),x.members.length>5&&e.jsxs("div",{className:"member-bubble-small more",children:["+",x.members.length-5]})]}),e.jsx("div",{className:"space-card-actions",children:W?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn-text",onClick:()=>v(x.id),children:"Invite"}),e.jsx("button",{className:"btn-text",onClick:()=>M(x.inviteCode),children:"Copy Code"})]}):e.jsx("button",{className:"btn-text",onClick:()=>N(x.id),children:"Leave"})}),D===x.id&&e.jsxs("div",{className:"inline-form",children:[e.jsx("input",{type:"email",placeholder:"Member's email",value:l,onChange:Y=>h(Y.target.value)}),e.jsx("button",{className:"btn-primary",onClick:()=>q(x.id),children:"Add"}),e.jsx("button",{className:"btn-text",onClick:()=>v(null),children:"Cancel"})]})]},x.id)})})]}),o&&e.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:e.jsxs("div",{className:"modal-simple",onClick:x=>x.stopPropagation(),children:[e.jsx("h2",{children:"Create a Space"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Emoji"}),e.jsx("input",{type:"text",value:C,onChange:x=>S(x.target.value),maxLength:2,className:"emoji-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",placeholder:"Founders Circle",value:f,onChange:x=>I(x.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description (optional)"}),e.jsx("textarea",{placeholder:"What's this space about?",value:k,onChange:x=>T(x.target.value)})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>g(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:P,disabled:!f.trim(),children:"Create"})]})]})}),b&&e.jsx("div",{className:"modal-overlay",onClick:()=>E(!1),children:e.jsxs("div",{className:"modal-simple",onClick:x=>x.stopPropagation(),children:[e.jsx("h2",{children:"Join a Space"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Invite Code"}),e.jsx("input",{type:"text",placeholder:"Paste invite code",value:L,onChange:x=>F(x.target.value)})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>E(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:z,disabled:!L.trim(),children:"Join"})]})]})})]})}const Xs=["üöÄ","üí°","üî•","‚≠ê","üéØ","üíé","üåü","üé®","üõ†Ô∏è","üìà","ü§ù","üåç"];function ea(){const a=xe(),[i,t]=r.useState(""),[c,d]=r.useState("üöÄ"),[o,g]=r.useState(""),[b,E]=r.useState(!1),D=async()=>{if(i.trim()){E(!0);try{const v=await fetch("/api/spaces",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:i.trim(),emoji:c,description:o.trim()||null})});if(v.ok)a("/spaces");else{const A=await v.json();console.error("Failed to create space:",A),alert(`Failed to create space: ${A.error||"Unknown error"}`)}}catch(v){console.error("Failed to create space:",v),alert("Failed to create space. Check console for details.")}finally{E(!1)}}};return e.jsxs("div",{className:"create-space-page",children:[e.jsx("div",{className:"create-space-header",children:e.jsx(O,{to:"/spaces",className:"back-link",children:"‚Üê Back to Spaces"})}),e.jsxs("div",{className:"create-space-card",children:[e.jsxs("div",{className:"create-space-preview",children:[e.jsx("span",{className:"preview-emoji",children:c}),e.jsx("h2",{className:"preview-name",children:i||"Your Space Name"}),o&&e.jsx("p",{className:"preview-desc",children:o})]}),e.jsxs("div",{className:"create-space-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("label",{children:"Choose an emoji"}),e.jsx("div",{className:"emoji-picker",children:Xs.map(v=>e.jsx("button",{type:"button",className:`emoji-option ${c===v?"selected":""}`,onClick:()=>d(v),children:v},v))})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("label",{htmlFor:"space-name",children:"Space name"}),e.jsx("input",{id:"space-name",type:"text",placeholder:"e.g., Founder CY, Innovators, YC Alumni",value:i,onChange:v=>t(v.target.value),autoFocus:!0})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("label",{htmlFor:"space-desc",children:["Description ",e.jsx("span",{className:"optional",children:"(optional)"})]}),e.jsx("textarea",{id:"space-desc",placeholder:"What's this space about? Who should join?",value:o,onChange:v=>g(v.target.value),rows:3})]}),e.jsxs("div",{className:"create-space-actions",children:[e.jsx(O,{to:"/spaces",className:"btn-secondary",children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:D,disabled:!i.trim()||b,children:b?"Creating...":"Create Space"})]})]})]})]})}function sa(a,i){const t=Math.floor((Date.now()-new Date(a).getTime())/864e5);return t<=7&&i>=3?"strong":t<=30&&i>=2?"medium":"weak"}const Ye=[{value:"fintech",label:"Fintech"},{value:"saas",label:"SaaS"},{value:"ai",label:"AI / ML"},{value:"developer_tools",label:"Developer Tools"},{value:"design",label:"Design"},{value:"vc",label:"VC / Investment"}],Ge=[{value:"startup",label:"Startup (1-50)"},{value:"scaleup",label:"Scale-up (51-500)"},{value:"enterprise",label:"Enterprise (500+)"}],Ue=[{name:"Stripe",domain:"stripe.com",contactCount:2,industry:"fintech",size:"enterprise",roles:["Engineering","Product"]},{name:"Google",domain:"google.com",contactCount:2,industry:"saas",size:"enterprise",roles:["Engineering","Sales"]},{name:"Y Combinator",domain:"ycombinator.com",contactCount:1,industry:"vc",size:"scaleup",roles:["Partner"]},{name:"Sequoia Capital",domain:"sequoiacap.com",contactCount:1,industry:"vc",size:"scaleup",roles:["Partner"]},{name:"OpenAI",domain:"openai.com",contactCount:1,industry:"ai",size:"scaleup",roles:["Research"]},{name:"Figma",domain:"figma.com",contactCount:1,industry:"design",size:"scaleup",roles:["Design"]},{name:"Notion",domain:"notion.so",contactCount:1,industry:"saas",size:"scaleup",roles:["Product"]},{name:"Vercel",domain:"vercel.com",contactCount:1,industry:"developer_tools",size:"startup",roles:["Engineering"]}];function aa(){const{id:a}=Je(),i=xe(),{currentUser:t,contacts:c}=ee(),d=Ie(),[o,g]=r.useState(null),[b,E]=r.useState(!0),[D,v]=r.useState(!1),[A,R]=r.useState(""),[p,u]=r.useState(!1),f=r.useMemo(()=>c.filter(n=>n.isApproved).map(n=>{var y,$;return{id:n.id,name:n.name||"Unknown",email:n.email,avatar:`https://i.pravatar.cc/150?u=${n.email}`,title:n.title||"",company:((y=n.company)==null?void 0:y.name)||"",companyDomain:(($=n.company)==null?void 0:$.domain)||"",lastContacted:new Date(n.lastSeenAt),connectionStrength:sa(n.lastSeenAt,n.meetingsCount)}}),[c]),[I,C]=r.useState("requests"),[S,k]=r.useState([]),[T,L]=r.useState(""),[F,l]=r.useState("contacts"),[h,w]=r.useState(!1),[P,z]=r.useState([]),[q,N]=r.useState([]),[M,G]=r.useState([]),[x,W]=r.useState(null),[Y,Q]=r.useState(!1),[se,de]=r.useState(null),[ne,te]=r.useState(""),[re,me]=r.useState(""),[Ce,fe]=r.useState(!1),Ne=r.useMemo(()=>{let n=[...Ue];if(T){const y=T.toLowerCase();n=n.filter($=>$.name.toLowerCase().includes(y)||$.domain.toLowerCase().includes(y))}return P.length>0&&(n=n.filter(y=>!!(P.includes("1")&&y.contactCount===1||P.includes("2-5")&&y.contactCount>=2&&y.contactCount<=5||P.includes("5+")&&y.contactCount>5))),q.length>0&&(n=n.filter(y=>q.includes(y.industry))),M.length>0&&(n=n.filter(y=>M.includes(y.size))),n.sort((y,$)=>F==="contacts"?$.contactCount-y.contactCount:y.name.localeCompare($.name))},[T,F,P,q,M]),Se=n=>{z(y=>y.includes(n)?y.filter($=>$!==n):[...y,n])},X=n=>{N(y=>y.includes(n)?y.filter($=>$!==n):[...y,n])},he=n=>{G(y=>y.includes(n)?y.filter($=>$!==n):[...y,n])},V=()=>{L(""),z([]),N([]),G([])},K=P.length+q.length+M.length,ve=(n,y,$)=>{de({company:n,role:y,domain:$}),te(`Looking for an intro to someone at ${n} in ${y}.`),me("$100 for a successful intro"),Q(!0)},ye=async()=>{if(!(!se||!ne.trim()||!a||!t)){fe(!0);try{const n=re.match(/\$(\d+)/),y=n?parseInt(n[1],10):0,$=`${ne}

Offering: ${re}`,_={targetDomain:se.domain,targetCompany:se.company,targetRole:se.role,offer:re},oe=await fetch("/api/requests",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({rawText:$,normalizedQuery:_,bidAmount:y,currency:"USD",spaceId:a})});if(!oe.ok)throw new Error("Failed to create request");const Ee=await oe.json();d({type:"ADD_REQUEST",payload:{id:Ee.id,requesterId:t.id,rawText:$,normalizedQuery:_,bidAmount:y,currency:"USD",status:"open",createdAt:new Date().toISOString(),spaceId:a}}),await ae(),Q(!1),de(null),te(""),me(""),C("requests")}catch(n){console.error("Failed to submit intro request:",n),alert("Failed to submit request. Please try again.")}finally{fe(!1)}}};r.useEffect(()=>{ae()},[a]);const ae=async()=>{try{const n=await fetch(`/api/spaces/${a}`,{credentials:"include"});if(n.ok){const y=await n.json();g(y),y.ownerId===(t==null?void 0:t.id)&&we()}}catch(n){console.error("Failed to fetch space:",n)}finally{E(!1)}},we=async()=>{try{const n=await fetch(`/api/spaces/${a}/pending`,{credentials:"include"});if(n.ok){const y=await n.json();k(y)}}catch(n){console.error("Failed to fetch pending members:",n)}},pe=async n=>{if(o)try{await fetch(`/api/spaces/${o.id}/members/${n}/approve`,{method:"POST",credentials:"include"}),ae(),we()}catch(y){console.error("Failed to approve member:",y)}},ke=async n=>{if(o)try{await fetch(`/api/spaces/${o.id}/members/${n}/reject`,{method:"POST",credentials:"include"}),we()}catch(y){console.error("Failed to reject member:",y)}},Ae=async n=>{if(!(!o||!confirm("Delete this request? This cannot be undone.")))try{await fetch(`/api/spaces/${o.id}/requests/${n}`,{method:"DELETE",credentials:"include"}),ae()}catch(y){console.error("Failed to delete request:",y)}},le=(o==null?void 0:o.requests)||[],je=r.useMemo(()=>le.filter(n=>n.requesterId===(t==null?void 0:t.id)),[le,t==null?void 0:t.id]),ge=r.useMemo(()=>le.filter(n=>n.requesterId!==(t==null?void 0:t.id)),[le,t==null?void 0:t.id]),Te=r.useMemo(()=>ge.filter(n=>{var $;const y=($=n.normalizedQuery)==null?void 0:$.targetDomain;return y?f.some(_=>_.companyDomain===y||_.company.toLowerCase().includes(y.replace(".com","").toLowerCase())):!1}),[ge]),Le=async()=>{if(!(!A.trim()||!o))try{await fetch(`/api/spaces/${o.id}/members`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:A})}),R(""),v(!1),ae()}catch(n){console.error("Failed to invite member:",n)}},De=async n=>{if(o)try{await fetch(`/api/spaces/${o.id}/members/${n}`,{method:"DELETE",credentials:"include"}),ae()}catch(y){console.error("Failed to remove member:",y)}},Fe=async()=>{if(o)try{await fetch(`/api/spaces/${o.id}/leave`,{method:"POST",credentials:"include"}),i("/spaces")}catch(n){console.error("Failed to leave space:",n)}},qe=async()=>{if(!(!o||!confirm("Delete this space? This cannot be undone.")))try{await fetch(`/api/spaces/${o.id}`,{method:"DELETE",credentials:"include"}),i("/spaces")}catch(n){console.error("Failed to delete space:",n)}},ie=()=>{o&&(navigator.clipboard.writeText(o.inviteCode),u(!0),setTimeout(()=>u(!1),2e3))};if(b)return e.jsx("div",{className:"space-detail-page",children:e.jsx("div",{className:"loading-state",children:"Loading..."})});if(!o)return e.jsx("div",{className:"space-detail-page",children:e.jsxs("div",{className:"detail-empty",children:[e.jsx("h2",{children:"Space not found"}),e.jsx(O,{to:"/spaces",className:"btn-primary",children:"Back to Spaces"})]})});const U=o.ownerId===(t==null?void 0:t.id);return e.jsxs("div",{className:"space-detail-page",children:[e.jsx("div",{className:"space-detail-header",children:e.jsx(O,{to:"/spaces",className:"back-link",children:"‚Üê Back to Spaces"})}),e.jsxs("div",{className:"space-detail-hero",children:[e.jsx("span",{className:"space-hero-emoji",children:o.emoji}),e.jsxs("div",{className:"space-hero-info",children:[e.jsx("h1",{children:o.name}),o.description&&e.jsx("p",{className:"space-hero-desc",children:o.description}),e.jsxs("div",{className:"space-hero-stats",children:[e.jsxs("div",{className:"hero-stat",children:[e.jsx("span",{className:"hero-stat-value",children:o.members.length}),e.jsx("span",{className:"hero-stat-label",children:"Members"})]}),e.jsxs("div",{className:"hero-stat",children:[e.jsx("span",{className:"hero-stat-value",children:Ue.length}),e.jsx("span",{className:"hero-stat-label",children:"Companies"})]}),e.jsxs("div",{className:"hero-stat",children:[e.jsx("span",{className:"hero-stat-value",children:le.length}),e.jsx("span",{className:"hero-stat-label",children:"Requests"})]})]})]}),U&&e.jsx("span",{className:"owner-badge-large",children:"Owner"})]}),e.jsxs("div",{className:"space-tabs",children:[e.jsx("button",{className:`space-tab ${I==="requests"?"active":""}`,onClick:()=>C("requests"),children:"Requests"}),e.jsx("button",{className:`space-tab ${I==="reach"?"active":""}`,onClick:()=>C("reach"),children:"Space Reach"}),e.jsx("button",{className:`space-tab ${I==="members"?"active":""}`,onClick:()=>C("members"),children:"Members"}),U&&e.jsxs("button",{className:`space-tab ${I==="admin"?"active":""}`,onClick:()=>C("admin"),children:["Admin ",S.length>0&&e.jsx("span",{className:"tab-badge",children:S.length})]})]}),e.jsxs("div",{className:"space-detail-content",children:[I==="requests"&&e.jsxs(e.Fragment,{children:[je.length>0&&e.jsxs("div",{className:"feed-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Your Requests"}),e.jsxs("span",{className:"section-count",children:[je.filter(n=>n.status==="open").length," active"]})]}),e.jsx("div",{className:"section-content",children:je.map(n=>e.jsxs(O,{to:`/request/${n.id}`,className:"request-card my-request",children:[e.jsxs("div",{className:"request-card-header",children:[e.jsx("span",{className:`status-badge ${n.status}`,children:n.status}),n.bidAmount>0&&e.jsxs("span",{className:"bounty-badge",children:["$",n.bidAmount]})]}),e.jsx("p",{className:"request-text",children:n.rawText}),n.offers.length>0&&e.jsxs("div",{className:"request-notification success",children:[n.offers.length," offer",n.offers.length!==1?"s":""," waiting for review"]})]},n.id))})]}),Te.length>0&&e.jsxs("div",{className:"feed-section suggested",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"You Can Help"}),e.jsxs("span",{className:"section-subtitle",children:[Te.length," requests you can intro"]})]}),e.jsx("div",{className:"section-content",children:Te.map(n=>{var _;const y=(_=n.normalizedQuery)==null?void 0:_.targetDomain,$=f.find(oe=>oe.companyDomain===y||oe.company.toLowerCase().includes((y||"").replace(".com","").toLowerCase()));return e.jsxs("div",{className:"request-card suggestion",children:[e.jsxs("div",{className:"request-card-header",children:[e.jsxs("div",{className:"requester-info",children:[n.requester.avatar?e.jsx("img",{src:n.requester.avatar,alt:"",className:"requester-avatar",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"requester-avatar fallback",children:n.requester.name.charAt(0)}),e.jsx("span",{className:"requester-name",children:n.requester.name})]}),n.bidAmount>0&&e.jsxs("span",{className:"bounty-badge",children:["$",n.bidAmount]})]}),e.jsx("p",{className:"request-text",children:n.rawText}),$&&e.jsxs("div",{className:"suggestion-box",children:[e.jsx("div",{className:"suggestion-label",children:"You know:"}),e.jsxs("div",{className:"contact-suggestion",children:[e.jsx("img",{src:$.avatar,alt:"",className:"contact-avatar"}),e.jsxs("div",{className:"contact-info",children:[e.jsx("span",{className:"contact-name",children:$.name}),e.jsxs("span",{className:"contact-title",children:[$.title," at ",$.company]})]}),e.jsx("span",{className:`connection-strength ${$.connectionStrength}`,children:$.connectionStrength})]})]}),e.jsxs("div",{className:"request-actions",children:[e.jsx(O,{to:`/request/${n.id}`,className:"btn-secondary",children:"View Details"}),e.jsx("button",{className:"btn-primary",children:"Offer Intro"})]})]},n.id)})})]}),e.jsxs("div",{className:"feed-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"All Space Requests"}),e.jsxs("span",{className:"section-count",children:[ge.length," requests"]})]}),e.jsx("div",{className:"section-content",children:ge.length===0?e.jsx("div",{className:"empty-section",children:e.jsx("p",{children:"No requests yet from other members"})}):ge.map(n=>e.jsxs("div",{className:"request-card community",children:[e.jsxs("div",{className:"request-card-header",children:[e.jsxs("div",{className:"requester-info",children:[n.requester.avatar?e.jsx("img",{src:n.requester.avatar,alt:"",className:"requester-avatar",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"requester-avatar fallback",children:n.requester.name.charAt(0)}),e.jsx("span",{className:"requester-name",children:n.requester.name})]}),n.bidAmount>0&&e.jsxs("span",{className:"bounty-badge",children:["$",n.bidAmount]})]}),e.jsx("p",{className:"request-text",children:n.rawText}),e.jsx("div",{className:"request-actions",children:e.jsx(O,{to:`/request/${n.id}`,className:"btn-text-link",children:"View"})})]},n.id))})]})]}),I==="reach"&&e.jsxs("div",{className:"reach-page",children:[e.jsxs("div",{className:"crm-header",children:[e.jsxs("div",{className:"crm-title",children:[e.jsx("h1",{children:"Companies We Can Reach"}),e.jsxs("p",{className:"crm-subtitle",children:[Ne.length," of ",Ue.length," companies",K>0&&e.jsxs("button",{className:"clear-filters-btn",onClick:V,children:["Clear ",K," filter",K>1?"s":""]})]})]}),e.jsxs("button",{className:`filter-toggle-btn ${h?"active":""}`,onClick:()=>w(!h),children:[e.jsx("span",{children:"‚öôÔ∏è"})," Filters ",K>0&&`(${K})`]})]}),e.jsxs("div",{className:"crm-layout",children:[h&&e.jsxs("aside",{className:"crm-filters",children:[e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{className:"filter-title",children:"Contacts Available"}),e.jsx("div",{className:"filter-options",children:["1","2-5","5+"].map(n=>e.jsxs("label",{className:"filter-checkbox",children:[e.jsx("input",{type:"checkbox",checked:P.includes(n),onChange:()=>Se(n)}),e.jsx("span",{className:"filter-label-text",children:n==="1"?"1 contact":n==="2-5"?"2-5 contacts":"5+ contacts"})]},n))})]}),e.jsxs("div",{className:"filter-section",children:[e.jsxs("h3",{className:"filter-title",children:["Industry",q.length>0&&e.jsx("span",{className:"filter-count",children:q.length})]}),e.jsx("div",{className:"filter-options",children:Ye.map(({value:n,label:y})=>e.jsxs("label",{className:"filter-checkbox",children:[e.jsx("input",{type:"checkbox",checked:q.includes(n),onChange:()=>X(n)}),e.jsx("span",{className:"filter-label-text",children:y})]},n))})]}),e.jsxs("div",{className:"filter-section",children:[e.jsxs("h3",{className:"filter-title",children:["Company Size",M.length>0&&e.jsx("span",{className:"filter-count",children:M.length})]}),e.jsx("div",{className:"filter-options",children:Ge.map(({value:n,label:y})=>e.jsxs("label",{className:"filter-checkbox",children:[e.jsx("input",{type:"checkbox",checked:M.includes(n),onChange:()=>he(n)}),e.jsx("span",{className:"filter-label-text",children:y})]},n))})]}),K>0&&e.jsx("button",{className:"clear-filters-btn",onClick:V,children:"Clear all filters"})]}),e.jsxs("div",{className:"crm-content",children:[e.jsx("div",{className:"crm-toolbar",children:e.jsxs("div",{className:"crm-controls",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("span",{className:"search-icon",children:"üîç"}),e.jsx("input",{type:"text",placeholder:"Search companies...",value:T,onChange:n=>L(n.target.value)})]}),e.jsxs("div",{className:"sort-controls",children:[e.jsx("button",{className:`sort-btn ${F==="contacts"?"active":""}`,onClick:()=>l("contacts"),children:"Most Contacts"}),e.jsx("button",{className:`sort-btn ${F==="name"?"active":""}`,onClick:()=>l("name"),children:"A-Z"})]})]})}),K>0&&e.jsxs("div",{className:"active-filters",children:[P.map(n=>e.jsxs("span",{className:"filter-tag",children:[n==="1"?"1 contact":n==="2-5"?"2-5 contacts":"5+ contacts",e.jsx("button",{onClick:()=>Se(n),children:"√ó"})]},n)),q.map(n=>{var y;return e.jsxs("span",{className:"filter-tag",children:[((y=Ye.find($=>$.value===n))==null?void 0:y.label)||n,e.jsx("button",{onClick:()=>X(n),children:"√ó"})]},n)}),M.map(n=>{var y;return e.jsxs("span",{className:"filter-tag",children:[((y=Ge.find($=>$.value===n))==null?void 0:y.label)||n,e.jsx("button",{onClick:()=>he(n),children:"√ó"})]},n)})]}),Ne.length===0?e.jsxs("div",{className:"empty-network",children:[e.jsx("div",{className:"empty-icon",children:"üè¢"}),e.jsx("h2",{children:"No companies found"}),e.jsx("p",{children:"Try adjusting your filters"}),K>0&&e.jsx("button",{className:"btn-secondary",onClick:V,children:"Clear all filters"})]}):e.jsx("div",{className:"companies-list",children:Ne.map(n=>{var y,$;return e.jsxs("div",{className:"company-card",children:[e.jsxs("div",{className:"company-row",onClick:()=>W(x===n.domain?null:n.domain),children:[e.jsx("div",{className:"company-logo",children:n.name.charAt(0)}),e.jsxs("div",{className:"company-info",children:[e.jsx("div",{className:"company-name",children:n.name}),e.jsx("div",{className:"company-domain",children:n.domain})]}),e.jsxs("div",{className:"company-meta",children:[e.jsx("span",{className:"company-industry-badge",children:(y=Ye.find(_=>_.value===n.industry))==null?void 0:y.label}),e.jsx("span",{className:"company-size-badge",children:($=Ge.find(_=>_.value===n.size))==null?void 0:$.label.split(" ")[0]}),e.jsxs("span",{className:"company-contact-count",children:[n.contactCount," contact",n.contactCount!==1?"s":""]}),e.jsx("span",{className:`expand-arrow ${x===n.domain?"expanded":""}`,children:"‚ñº"})]})]}),x===n.domain&&e.jsx("div",{className:"company-contacts",children:n.roles.map((_,oe)=>e.jsxs("div",{className:"company-contact-row",children:[e.jsx("div",{className:"contact-row-avatar-placeholder",children:_.charAt(0)}),e.jsxs("div",{className:"contact-row-info",children:[e.jsxs("span",{className:"contact-row-name",children:["Contact in ",_]}),e.jsxs("span",{className:"contact-row-title",children:[_," Team"]})]}),e.jsx("button",{className:"btn-text-small",onClick:Ee=>{Ee.stopPropagation(),ve(n.name,_,n.domain)},children:"Request Intro"})]},oe))})]},n.domain)})})]})]})]}),I==="members"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-section",children:[e.jsxs("div",{className:"space-section-header",children:[e.jsx("h2",{children:"Members"}),U&&e.jsx("button",{className:"btn-secondary",onClick:()=>v(!D),children:"+ Invite"})]}),D&&e.jsxs("div",{className:"invite-form",children:[e.jsx("input",{type:"email",placeholder:"Enter email address",value:A,onChange:n=>R(n.target.value)}),e.jsx("button",{className:"btn-primary",onClick:Le,disabled:!A.trim(),children:"Send"}),e.jsx("button",{className:"btn-text",onClick:()=>v(!1),children:"Cancel"})]}),e.jsx("div",{className:"members-grid",children:o.members.map(n=>e.jsxs("div",{className:"member-card",children:[e.jsx("div",{className:"member-card-avatar",children:n.user.avatar?e.jsx("img",{src:n.user.avatar,alt:"",referrerPolicy:"no-referrer"}):e.jsx("span",{children:n.user.name.charAt(0)})}),e.jsxs("div",{className:"member-card-info",children:[e.jsxs("span",{className:"member-card-name",children:[n.user.name,n.user.id===(t==null?void 0:t.id)&&" (you)"]}),e.jsx("span",{className:"member-card-role",children:n.role})]}),U&&n.user.id!==(t==null?void 0:t.id)&&e.jsx("button",{className:"member-remove-btn",onClick:()=>De(n.user.id),title:"Remove member",children:"√ó"})]},n.id))})]}),e.jsxs("div",{className:"space-section",children:[e.jsx("div",{className:"space-section-header",children:e.jsx("h2",{children:"Invite Code"})}),e.jsxs("div",{className:"invite-code-box",children:[e.jsx("code",{className:"invite-code",children:o.inviteCode}),e.jsx("button",{className:"btn-secondary",onClick:ie,children:p?"Copied!":"Copy"})]}),e.jsx("p",{className:"invite-hint",children:"Share this code with others to let them join"})]}),e.jsx("div",{className:"space-section",children:e.jsx("div",{className:"space-actions",children:!U&&e.jsx("button",{className:"btn-secondary",onClick:Fe,children:"Leave Space"})})})]}),I==="admin"&&U&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-section admin-section",children:[e.jsxs("div",{className:"space-section-header",children:[e.jsx("h2",{children:"Pending Applications"}),e.jsxs("span",{className:"section-badge",children:[S.length," pending"]})]}),S.length===0?e.jsx("div",{className:"empty-section",children:e.jsx("p",{children:"No pending applications"})}):e.jsx("div",{className:"admin-list",children:S.map(n=>e.jsxs("div",{className:"admin-list-item",children:[e.jsxs("div",{className:"admin-item-main",children:[e.jsx("div",{className:"admin-item-avatar",children:n.user.avatar?e.jsx("img",{src:n.user.avatar,alt:"",referrerPolicy:"no-referrer"}):e.jsx("span",{children:n.user.name.charAt(0)})}),e.jsxs("div",{className:"admin-item-info",children:[e.jsx("span",{className:"admin-item-name",children:n.user.name}),e.jsx("span",{className:"admin-item-email",children:n.user.email})]})]}),e.jsxs("div",{className:"admin-item-actions",children:[e.jsx("button",{className:"btn-primary-small",onClick:()=>pe(n.user.id),children:"Approve"}),e.jsx("button",{className:"btn-secondary-small",onClick:()=>ke(n.user.id),children:"Decline"})]})]},n.id))})]}),e.jsxs("div",{className:"space-section admin-section",children:[e.jsxs("div",{className:"space-section-header",children:[e.jsx("h2",{children:"Members"}),e.jsxs("span",{className:"section-badge",children:[o.members.filter(n=>n.user.id!==(t==null?void 0:t.id)).length," members"]})]}),o.members.filter(n=>n.user.id!==(t==null?void 0:t.id)).length===0?e.jsx("div",{className:"empty-section",children:e.jsx("p",{children:"No other members yet"})}):e.jsx("div",{className:"admin-list",children:o.members.filter(n=>n.user.id!==(t==null?void 0:t.id)).map(n=>e.jsxs("div",{className:"admin-list-item",children:[e.jsxs("div",{className:"admin-item-main",children:[e.jsx("div",{className:"admin-item-avatar",children:n.user.avatar?e.jsx("img",{src:n.user.avatar,alt:"",referrerPolicy:"no-referrer"}):e.jsx("span",{children:n.user.name.charAt(0)})}),e.jsxs("div",{className:"admin-item-info",children:[e.jsx("span",{className:"admin-item-name",children:n.user.name}),e.jsx("span",{className:"admin-item-role",children:n.role})]})]}),e.jsx("div",{className:"admin-item-actions",children:e.jsx("button",{className:"btn-danger-small",onClick:()=>De(n.user.id),children:"Remove"})})]},n.id))})]}),e.jsxs("div",{className:"space-section admin-section",children:[e.jsxs("div",{className:"space-section-header",children:[e.jsx("h2",{children:"Space Requests"}),e.jsxs("span",{className:"section-badge",children:[o.requests.length," requests"]})]}),o.requests.length===0?e.jsx("div",{className:"empty-section",children:e.jsx("p",{children:"No intro requests in this space"})}):e.jsx("div",{className:"admin-list",children:o.requests.map(n=>e.jsxs("div",{className:"admin-list-item request-item",children:[e.jsx("div",{className:"admin-item-main",children:e.jsxs("div",{className:"request-item-content",children:[e.jsxs("p",{className:"request-item-text",children:['"',n.rawText,'"']}),e.jsxs("div",{className:"request-item-meta",children:[e.jsxs("span",{className:"request-item-author",children:["by ",n.requester.name]}),e.jsx("span",{className:`status-badge small ${n.status}`,children:n.status})]})]})}),e.jsx("div",{className:"admin-item-actions",children:e.jsx("button",{className:"btn-danger-small",onClick:()=>Ae(n.id),children:"Delete"})})]},n.id))})]}),e.jsxs("div",{className:"space-section admin-section danger-zone",children:[e.jsx("div",{className:"space-section-header",children:e.jsx("h2",{children:"Danger Zone"})}),e.jsx("div",{className:"danger-zone-content",children:e.jsxs("div",{className:"danger-zone-item",children:[e.jsxs("div",{className:"danger-zone-info",children:[e.jsx("h3",{children:"Delete this space"}),e.jsx("p",{children:"Once deleted, this space and all its data cannot be recovered."})]}),e.jsx("button",{className:"btn-danger",onClick:qe,children:"Delete Space"})]})})]})]})]}),Y&&se&&e.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:e.jsxs("div",{className:"intro-request-modal",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Request Introduction"}),e.jsx("button",{className:"modal-close",onClick:()=>Q(!1),children:"√ó"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"intro-target-preview",children:[e.jsx("div",{className:"intro-target-icon",children:"üéØ"}),e.jsxs("div",{className:"intro-target-info",children:[e.jsx("span",{className:"intro-target-company",children:se.company}),e.jsxs("span",{className:"intro-target-role",children:[se.role," Team"]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"intro-message",children:"Your request"}),e.jsx("textarea",{id:"intro-message",value:ne,onChange:n=>te(n.target.value),placeholder:"Describe who you're looking to meet and why...",rows:5}),e.jsx("p",{className:"form-hint",children:"Be specific about the role, context, and why you want to connect."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"intro-offer",children:"What are you offering in return?"}),e.jsx("input",{id:"intro-offer",type:"text",value:re,onChange:n=>me(n.target.value),placeholder:"e.g., $100, coffee, dinner, help with your project..."}),e.jsx("p",{className:"form-hint",children:"Can be money, a favor, expertise, or anything of value to the introducer."})]}),e.jsxs("div",{className:"offer-suggestions",children:[e.jsx("span",{className:"offer-suggestions-label",children:"Quick options:"}),e.jsx("div",{className:"offer-suggestion-chips",children:["$50","$100","$200","Coffee ‚òï","Dinner üçΩÔ∏è","Advice session","Will return the favor"].map(n=>e.jsx("button",{className:`offer-chip ${re===n?"active":""}`,onClick:()=>me(n),children:n},n))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>Q(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:ye,disabled:!ne.trim()||!re.trim()||Ce,children:Ce?"Submitting...":"Post Request"})]})]})})]})}function ls(a){const i=Math.floor((Date.now()-a.getTime())/1e3);if(i<60)return"just now";const t=Math.floor(i/60);if(t<60)return`${t}m ago`;const c=Math.floor(t/60);if(c<24)return`${c}h ago`;const d=Math.floor(c/24);return d<7?`${d}d ago`:`${Math.floor(d/7)}w ago`}function na(a,i){const t=Math.floor((Date.now()-new Date(a).getTime())/864e5);return t<=7&&i>=3?"strong":t<=30&&i>=2?"medium":"weak"}function ta(){var F;const{currentUser:a,contacts:i,requests:t,offers:c,users:d}=ee(),[o,g]=r.useState([]),[b,E]=r.useState(!0),[D,v]=r.useState(null),[A,R]=r.useState(""),[p,u]=r.useState(""),f=r.useMemo(()=>i.filter(l=>l.isApproved).map(l=>{var h,w;return{id:l.id,name:l.name||l.email.split("@")[0],email:l.email,avatar:"",title:l.title||"",company:((h=l.company)==null?void 0:h.name)||"",companyDomain:((w=l.company)==null?void 0:w.domain)||l.email.split("@")[1]||"",lastContacted:new Date(l.lastSeenAt),connectionStrength:na(l.lastSeenAt,l.meetingsCount)}}),[i]),I=r.useMemo(()=>{const l={};return o.forEach(h=>{h.members.forEach(w=>{l[w.user.id]={id:h.id,name:h.name,emoji:h.emoji}})}),l},[o]);r.useEffect(()=>{E(!0),v(null),fetch("/api/spaces",{credentials:"include"}).then(l=>{if(!l.ok)throw new Error("Failed to load spaces");return l.json()}).then(l=>{g(Array.isArray(l)?l:[]),E(!1)}).catch(l=>{v(l.message),E(!1),g([])})},[]);const C=r.useMemo(()=>t.filter(l=>l.requesterId===(a==null?void 0:a.id)).map(l=>({...l,offersCount:c.filter(h=>h.requestId===l.id).length,pendingOffers:c.filter(h=>h.requestId===l.id&&h.status==="pending").length})).sort((l,h)=>new Date(h.createdAt).getTime()-new Date(l.createdAt).getTime()),[t,c,a]),S=r.useMemo(()=>t.filter(l=>l.requesterId!==(a==null?void 0:a.id)&&l.status==="open").map(l=>{var P;const h=(P=l.normalizedQuery)==null?void 0:P.targetDomain,w=h?f.filter(z=>z.companyDomain===h):[];return{request:l,requester:d.find(z=>z.id===l.requesterId),matchingContacts:w}}).filter(l=>l.matchingContacts.length>0).sort((l,h)=>new Date(h.request.createdAt).getTime()-new Date(l.request.createdAt).getTime()),[t,d,a]),k=r.useMemo(()=>t.filter(l=>l.requesterId!==(a==null?void 0:a.id)&&l.status==="open").map(l=>{var P;const h=(P=l.normalizedQuery)==null?void 0:P.targetDomain,w=h?f.filter(z=>z.companyDomain===h):[];return{request:l,requester:d.find(z=>z.id===l.requesterId),matchingContacts:w}}).filter(l=>l.matchingContacts.length===0).sort((l,h)=>new Date(h.request.createdAt).getTime()-new Date(l.request.createdAt).getTime()),[t,d,a]),T=l=>{l.preventDefault(),!(!A.trim()||!p)&&(window.location.href=`/request/new?text=${encodeURIComponent(A)}&spaceId=${p}`)},L=new Set(f.map(l=>l.company));return e.jsxs("div",{className:"home-feed",children:[e.jsxs("div",{className:"stats-bar",children:[e.jsxs(O,{to:"/network",className:"stat-item clickable",children:[e.jsx("span",{className:"stat-value",children:f.length}),e.jsx("span",{className:"stat-label",children:"Contacts"})]}),e.jsxs(O,{to:"/network?view=companies",className:"stat-item clickable",children:[e.jsx("span",{className:"stat-value",children:L.size}),e.jsx("span",{className:"stat-label",children:"Companies"})]}),e.jsxs(O,{to:"/spaces",className:"stat-item clickable",children:[e.jsx("span",{className:"stat-value",children:b?"...":o.length}),e.jsx("span",{className:"stat-label",children:"Spaces"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:C.filter(l=>l.status==="open").length}),e.jsx("span",{className:"stat-label",children:"Active Asks"})]})]}),e.jsx("div",{className:"compose-box",children:e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:"compose-input-row",children:[a!=null&&a.avatar?e.jsx("img",{src:a.avatar,alt:"",className:"compose-avatar",referrerPolicy:"no-referrer"}):e.jsx("div",{className:"compose-avatar fallback",children:(F=a==null?void 0:a.name)==null?void 0:F.charAt(0)}),e.jsx("input",{type:"text",placeholder:"Who do you want to meet? (e.g., 'Intro to someone at Stripe')",value:A,onChange:l=>R(l.target.value)})]}),e.jsxs("div",{className:"compose-actions-row",children:[e.jsxs("select",{className:"space-select",value:p,onChange:l=>u(l.target.value),disabled:b,children:[e.jsx("option",{value:"",children:b?"Loading spaces...":D?"Error loading spaces":"Select Space"}),o.map(l=>e.jsxs("option",{value:l.id,children:[l.emoji," ",l.name]},l.id))]}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:!A.trim()||!p,children:"Ask"})]})]})}),C.length>0&&e.jsxs("div",{className:"feed-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Your Requests"}),e.jsxs("span",{className:"section-count",children:[C.filter(l=>l.status==="open").length," active"]})]}),e.jsx("div",{className:"section-content",children:C.slice(0,3).map(l=>e.jsxs(O,{to:`/request/${l.id}`,className:"request-card my-request",children:[e.jsxs("div",{className:"request-card-header",children:[e.jsx("span",{className:`status-badge ${l.status}`,children:l.status}),l.bidAmount>0&&e.jsxs("span",{className:"bounty-badge",children:["$",l.bidAmount]}),e.jsx("span",{className:"request-time",children:ls(new Date(l.createdAt))})]}),e.jsx("p",{className:"request-text",children:l.rawText}),l.space&&e.jsxs("div",{className:"request-space-tag",children:[e.jsx("span",{className:"space-emoji",children:l.space.emoji}),e.jsx("span",{className:"space-name",children:l.space.name})]}),l.pendingOffers>0?e.jsxs("div",{className:"request-notification success",children:[l.pendingOffers," offer",l.pendingOffers>1?"s":""," waiting for review"]}):l.status==="open"?e.jsx("div",{className:"request-notification muted",children:"Waiting for offers..."}):null]},l.id))})]}),S.length>0&&e.jsxs("div",{className:"feed-section suggested",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Suggested For You"}),e.jsx("span",{className:"section-subtitle",children:"You know someone who can help"})]}),e.jsx("div",{className:"section-content",children:S.map(({request:l,requester:h,matchingContacts:w})=>{var z;const P=h!=null&&h.id?I[h.id]:null;return e.jsxs("div",{className:"request-card suggestion",children:[e.jsxs("div",{className:"request-card-header",children:[e.jsxs("div",{className:"requester-info",children:[h!=null&&h.avatar?e.jsx("img",{src:h.avatar,alt:"",className:"requester-avatar"}):e.jsx("div",{className:"requester-avatar fallback",children:(z=h==null?void 0:h.name)==null?void 0:z.charAt(0)}),e.jsx("span",{className:"requester-name",children:h==null?void 0:h.name}),P&&e.jsxs("span",{className:"space-tag",children:[P.emoji," ",P.name]})]}),l.bidAmount>0&&e.jsxs("span",{className:"bounty-badge",children:["$",l.bidAmount]})]}),e.jsx("p",{className:"request-text",children:l.rawText}),e.jsxs("div",{className:"suggestion-box",children:[e.jsx("div",{className:"suggestion-label",children:"You know:"}),w.slice(0,2).map(q=>e.jsxs("div",{className:"contact-suggestion",children:[e.jsx("div",{className:"contact-avatar contact-initials",children:q.name.split(" ").map(N=>N[0]).slice(0,2).join("").toUpperCase()}),e.jsxs("div",{className:"contact-info",children:[e.jsx("span",{className:"contact-name",children:q.name}),e.jsx("span",{className:"contact-title",children:q.company||q.companyDomain})]}),e.jsx("span",{className:`connection-strength ${q.connectionStrength}`,children:q.connectionStrength})]},q.id))]}),e.jsxs("div",{className:"request-actions",children:[e.jsx(O,{to:`/request/${l.id}`,className:"btn-secondary",children:"View Details"}),e.jsx("button",{className:"btn-primary",children:"Offer Intro"})]})]},l.id)})})]}),k.length>0&&e.jsxs("div",{className:"feed-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Community Asks"}),e.jsxs("span",{className:"section-count",children:[k.length," requests"]})]}),e.jsx("div",{className:"section-content",children:k.map(({request:l,requester:h})=>{var P;const w=h!=null&&h.id?I[h.id]:null;return e.jsxs("div",{className:"request-card community",children:[e.jsxs("div",{className:"request-card-header",children:[e.jsxs("div",{className:"requester-info",children:[h!=null&&h.avatar?e.jsx("img",{src:h.avatar,alt:"",className:"requester-avatar"}):e.jsx("div",{className:"requester-avatar fallback",children:(P=h==null?void 0:h.name)==null?void 0:P.charAt(0)}),e.jsx("span",{className:"requester-name",children:h==null?void 0:h.name}),w&&e.jsxs("span",{className:"space-tag",children:[w.emoji," ",w.name]}),e.jsx("span",{className:"request-time",children:ls(new Date(l.createdAt))})]}),l.bidAmount>0&&e.jsxs("span",{className:"bounty-badge",children:["$",l.bidAmount]})]}),e.jsx("p",{className:"request-text",children:l.rawText}),e.jsx("div",{className:"request-actions",children:e.jsx(O,{to:`/request/${l.id}`,className:"btn-text-link",children:"View"})})]},l.id)})})]}),C.length===0&&S.length===0&&k.length===0&&e.jsxs("div",{className:"empty-feed",children:[e.jsx("div",{className:"empty-icon",children:"üå±"}),e.jsx("h3",{children:"Nothing here yet"}),e.jsx("p",{children:"Ask for an intro or join a space to see activity!"})]})]})}function os({signal:a,onClose:i,onSaved:t}){const c=!!a,[d,o]=r.useState(c?4:1),[g,b]=r.useState((a==null?void 0:a.entityType)||"person"),[E,D]=r.useState((a==null?void 0:a.triggerType)||"field_change"),[v,A]=r.useState((a==null?void 0:a.name)||""),[R,p]=r.useState((a==null?void 0:a.description)||""),[u,f]=r.useState((a==null?void 0:a.config)||{}),[I,C]=r.useState((a==null?void 0:a.isActive)??!0),[S,k]=r.useState(!1),T=[{value:"title",label:"Job Title Changed",description:"When someone changes their role or position"},{value:"company",label:"Company Changed",description:"When someone moves to a new company"}],L=[{value:"headcount",label:"Team Size Changed",description:"When company headcount grows or shrinks"},{value:"new_roles",label:"New Open Roles",description:"When new positions are posted (e.g., B2B Sales)"},{value:"key_hires",label:"Key Hires",description:"When someone joins as CBDO, Head of Sales, etc."}],F=[{label:"Recent Activity",prompt:"What interesting things happened to this person in the last 3 months?"},{label:"Career Updates",prompt:"Any significant career developments or achievements?"}],l=[{label:"Company News",prompt:"Any significant news about this company in the last 3 months?"},{label:"Product Updates",prompt:"How has their product evolved recently?"},{label:"Team Growth",prompt:"How has the team grown and in which departments?"}],h=async()=>{if(!v.trim()){alert("Please enter a signal name");return}k(!0);try{const w=c&&a?`/api/signals/${a.id}`:"/api/signals",z=await fetch(w,{method:c?"PATCH":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:v,description:R,entityType:g,triggerType:E,config:u,isActive:I})});if(z.ok)t();else{const q=await z.json().catch(()=>({error:"Unknown error"}));alert(`Failed to ${c?"update":"create"} signal: ${q.error||z.statusText}`)}}catch(w){console.error(`Failed to ${c?"update":"create"} signal:`,w),alert(`Failed to ${c?"update":"create"} signal. Please check if the server is running.`)}finally{k(!1)}};return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"signal-builder-modal",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:c?"Edit Signal":"Create New Signal"}),e.jsx("button",{className:"modal-close",onClick:i,children:"√ó"})]}),e.jsxs("div",{className:"signal-builder-steps",children:[e.jsxs("div",{className:`step ${d>=1?"active":""} ${d>1?"completed":""}`,children:[e.jsx("span",{className:"step-number",children:"1"}),e.jsx("span",{className:"step-label",children:"Type"})]}),e.jsxs("div",{className:`step ${d>=2?"active":""} ${d>2?"completed":""}`,children:[e.jsx("span",{className:"step-number",children:"2"}),e.jsx("span",{className:"step-label",children:"Trigger"})]}),e.jsxs("div",{className:`step ${d>=3?"active":""} ${d>3?"completed":""}`,children:[e.jsx("span",{className:"step-number",children:"3"}),e.jsx("span",{className:"step-label",children:"Configure"})]}),e.jsxs("div",{className:`step ${d>=4?"active":""}`,children:[e.jsx("span",{className:"step-number",children:"4"}),e.jsx("span",{className:"step-label",children:"Save"})]})]}),e.jsxs("div",{className:"signal-builder-content",children:[d===1&&e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:"What do you want to track?"}),e.jsx("p",{className:"step-description",children:"Choose whether to track updates about people or companies in your network."}),e.jsxs("div",{className:"entity-type-options",children:[e.jsxs("button",{className:`entity-option ${g==="person"?"selected":""}`,onClick:()=>b("person"),children:[e.jsx("span",{className:"entity-icon",children:"üë§"}),e.jsx("span",{className:"entity-label",children:"People"}),e.jsx("span",{className:"entity-desc",children:"Track role changes, company moves, and personal updates"})]}),e.jsxs("button",{className:`entity-option ${g==="company"?"selected":""}`,onClick:()=>b("company"),children:[e.jsx("span",{className:"entity-icon",children:"üè¢"}),e.jsx("span",{className:"entity-label",children:"Companies"}),e.jsx("span",{className:"entity-desc",children:"Track team growth, new hires, news, and product updates"})]})]})]}),d===2&&e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:"How should the signal trigger?"}),e.jsx("p",{className:"step-description",children:"Choose between tracking specific data changes or using AI to analyze updates."}),e.jsxs("div",{className:"trigger-type-options",children:[e.jsxs("button",{className:`trigger-option ${E==="field_change"?"selected":""}`,onClick:()=>D("field_change"),children:[e.jsx("span",{className:"trigger-icon",children:"üìä"}),e.jsx("span",{className:"trigger-label",children:"Field Change"}),e.jsx("span",{className:"trigger-desc",children:"Trigger when a specific data field changes (title, company, headcount)"})]}),e.jsxs("button",{className:`trigger-option ${E==="prompt_based"?"selected":""}`,onClick:()=>D("prompt_based"),children:[e.jsx("span",{className:"trigger-icon",children:"ü§ñ"}),e.jsx("span",{className:"trigger-label",children:"AI Analysis"}),e.jsx("span",{className:"trigger-desc",children:"Use AI to periodically analyze and surface interesting updates"})]})]})]}),d===3&&e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:"Configure your signal"}),E==="field_change"?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"step-description",children:"Select which field changes to track."}),e.jsx("div",{className:"field-options",children:(g==="person"?T:L).map(w=>e.jsxs("label",{className:"field-option",children:[e.jsx("input",{type:"radio",name:"field",checked:u.field===w.value,onChange:()=>f({...u,field:w.value})}),e.jsxs("div",{className:"field-option-content",children:[e.jsx("span",{className:"field-option-label",children:w.label}),e.jsx("span",{className:"field-option-desc",children:w.description})]})]},w.value))})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"step-description",children:"Choose a prompt template or write your own."}),e.jsx("div",{className:"prompt-templates",children:(g==="person"?F:l).map((w,P)=>e.jsx("button",{className:`prompt-template ${u.prompt===w.prompt?"selected":""}`,onClick:()=>f({...u,prompt:w.prompt}),children:w.label},P))}),e.jsx("textarea",{className:"prompt-input",placeholder:"Or write your own prompt...",value:u.prompt||"",onChange:w=>f({...u,prompt:w.target.value}),rows:3})]})]}),d===4&&e.jsxs("div",{className:"step-content",children:[e.jsx("h3",{children:"Name your signal"}),e.jsx("p",{className:"step-description",children:"Give your signal a memorable name."}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Signal Name"}),e.jsx("input",{type:"text",placeholder:"e.g., Role Changes, New Sales Hires",value:v,onChange:w=>A(w.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description (optional)"}),e.jsx("textarea",{placeholder:"What does this signal track?",value:R,onChange:w=>p(w.target.value),rows:2})]}),c&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:w=>C(w.target.checked)}),e.jsx("span",{children:"Signal is active"})]}),e.jsx("p",{className:"form-hint",children:"Inactive signals won't trigger new matches"})]}),e.jsxs("div",{className:"signal-summary",children:[e.jsx("h4",{children:"Signal Summary"}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Tracking:"}),e.jsx("span",{className:"summary-value",children:g==="person"?"üë§ People":"üè¢ Companies"})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Trigger:"}),e.jsx("span",{className:"summary-value",children:E==="field_change"?`üìä ${u.field||"Field"} changes`:"ü§ñ AI Analysis"})]}),typeof u.prompt=="string"&&u.prompt&&e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Prompt:"}),e.jsx("span",{className:"summary-value prompt",children:u.prompt})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[d>1&&e.jsx("button",{className:"btn-secondary",onClick:()=>o(d-1),children:"Back"}),d<4?e.jsx("button",{className:"btn-primary",onClick:()=>o(d+1),disabled:d===3&&!u.field&&!u.prompt,children:"Continue"}):e.jsx("button",{className:"btn-primary",onClick:h,disabled:!v.trim()||S,children:S?c?"Saving...":"Creating...":c?"Save Changes":"Create Signal"})]})]})})}function ia(a,i){const t=Math.floor((Date.now()-new Date(a).getTime())/864e5);return t<=7&&i>=3?"strong":t<=30&&i>=2?"medium":"weak"}const ds=[{label:"Any time",value:"all"},{label:"Today",value:"today"},{label:"Last 7 days",value:"7d"},{label:"Last 30 days",value:"30d"},{label:"Last 90 days",value:"90d"},{label:"Last 6 months",value:"6m"},{label:"Last year",value:"1y"},{label:"Over a year ago",value:"older"}];function ca(){var Xe;const{contacts:a}=ee(),i=Ie(),[t,c]=Qe(),[d,o]=r.useState(!1),[g,b]=r.useState({name:"",email:"",title:"",company:""}),E=t.get("view"),D=E==="companies"?"companies":E==="signals"?"signals":"people",[v,A]=r.useState(D),[R,p]=r.useState(""),[u,f]=r.useState("recent"),[I,C]=r.useState(null),[S,k]=r.useState(!1),[T,L]=r.useState([]),[F,l]=r.useState([]),[h,w]=r.useState([]),[P,z]=r.useState("all"),[q,N]=r.useState(""),[M,G]=r.useState(""),[x,W]=r.useState([]),[Y,Q]=r.useState([]),[se,de]=r.useState(!1),[ne,te]=r.useState(!1),[re,me]=r.useState(null),[Ce,fe]=r.useState(0),[Ne,Se]=r.useState(!1),[X,he]=r.useState(1),[V,K]=r.useState(1),ve=50,ye=20,ae=r.useMemo(()=>a.filter(s=>!s.isApproved).length,[a]),we=async()=>{Se(!0);try{(await fetch("/api/relationships/contacts/approve-all",{method:"POST",credentials:"include"})).ok&&window.location.reload()}catch(s){console.error("Failed to approve contacts:",s)}finally{Se(!1)}},pe=r.useMemo(()=>a.filter(s=>s.isApproved).map(s=>{var m,j;return{id:s.id,name:s.name||s.email.split("@")[0],email:s.email,avatar:"",title:s.title||"",company:((m=s.company)==null?void 0:m.name)||"",companyDomain:((j=s.company)==null?void 0:j.domain)||s.email.split("@")[1]||"",lastContacted:new Date(s.lastSeenAt),lastEventTitle:s.lastEventTitle,meetings:(s.meetings||[]).map(B=>({id:B.id,title:B.title,date:new Date(B.date),duration:B.duration})),meetingsCount:s.meetingsCount,connectionStrength:ia(s.lastSeenAt,s.meetingsCount)}}),[a]),ke=r.useMemo(()=>{const s=new Map;return pe.forEach(m=>{m.company&&s.set(m.company,(s.get(m.company)||0)+1)}),Array.from(s.entries()).sort((m,j)=>j[1]-m[1]).map(([m,j])=>({name:m,count:j}))},[pe]),Ae=r.useMemo(()=>{const s=new Map;return pe.forEach(m=>{if(m.title){const j=m.title.toLowerCase().trim();s.set(j,(s.get(j)||0)+1)}}),Array.from(s.entries()).sort((m,j)=>j[1]-m[1]).slice(0,20).map(([m,j])=>({name:m,count:j}))},[pe]),le=s=>{A(s),c(s==="companies"?{view:"companies"}:s==="signals"?{view:"signals"}:{})};r.useEffect(()=>{v==="signals"&&(je(),ge())},[v]),r.useEffect(()=>{Te()},[]);const je=async()=>{try{const s=await fetch("/api/signals",{credentials:"include"});if(s.ok){const m=await s.json();W(m)}}catch(s){console.error("Failed to fetch signals:",s)}},ge=async()=>{de(!0);try{const s=await fetch("/api/signals/matches",{credentials:"include"});if(s.ok){const m=await s.json();Q(m)}}catch(s){console.error("Failed to fetch signal matches:",s)}finally{de(!1)}},Te=async()=>{try{const s=await fetch("/api/signals/matches/count",{credentials:"include"});if(s.ok){const m=await s.json();fe(m.count)}}catch(s){console.error("Failed to fetch unread count:",s)}},Le=async s=>{try{await fetch(`/api/signals/matches/${s}/read`,{method:"POST",credentials:"include"}),Q(m=>m.map(j=>j.id===s?{...j,isRead:!0}:j)),fe(m=>Math.max(0,m-1))}catch(m){console.error("Failed to mark match as read:",m)}},De=async()=>{try{await fetch("/api/signals/matches/read-all",{method:"POST",credentials:"include"}),Q(s=>s.map(m=>({...m,isRead:!0}))),fe(0)}catch(s){console.error("Failed to mark all as read:",s)}},Fe=async s=>{if(confirm("Delete this signal? All matches will also be deleted."))try{await fetch(`/api/signals/${s}`,{method:"DELETE",credentials:"include"}),W(m=>m.filter(j=>j.id!==s)),Q(m=>m.filter(j=>j.signalId!==s))}catch(m){console.error("Failed to delete signal:",m)}},qe=(s,m)=>{const j=Date.now(),B=Math.floor((j-s.getTime())/(1e3*60*60*24));switch(m){case"today":return B===0;case"7d":return B<=7;case"30d":return B<=30;case"90d":return B<=90;case"6m":return B<=180;case"1y":return B<=365;case"older":return B>365;default:return!0}},ie=r.useMemo(()=>{let s=[...pe];if(R){const m=R.toLowerCase();s=s.filter(j=>j.name.toLowerCase().includes(m)||j.company.toLowerCase().includes(m)||j.title.toLowerCase().includes(m)||j.email.toLowerCase().includes(m))}return T.length>0&&(s=s.filter(m=>T.includes(m.company))),F.length>0&&(s=s.filter(m=>F.some(j=>m.title.toLowerCase().includes(j)))),h.length>0&&(s=s.filter(m=>h.includes(m.connectionStrength))),P!=="all"&&(s=s.filter(m=>qe(m.lastContacted,P))),s.sort((m,j)=>{if(u==="recent")return j.lastContacted.getTime()-m.lastContacted.getTime();if(u==="strength"){const B={strong:3,medium:2,weak:1};return B[j.connectionStrength]-B[m.connectionStrength]}return m.name.localeCompare(j.name)})},[R,u,T,F,h,P,pe]),U=Math.ceil(ie.length/ve),n=r.useMemo(()=>{const s=(X-1)*ve;return ie.slice(s,s+ve)},[ie,X,ve]),y=`${R}-${u}-${T.join(",")}-${F.join(",")}-${h.join(",")}-${P}`;r.useEffect(()=>{he(1)},[y]);const $=r.useMemo(()=>{const s=new Map;return ie.filter(j=>j.company&&j.company.trim()!=="").forEach(j=>{s.has(j.company)||s.set(j.company,{company:j.company,domain:j.companyDomain,contacts:[]}),s.get(j.company).contacts.push(j)}),Array.from(s.values()).sort((j,B)=>{if(u==="strength")return B.contacts.length-j.contacts.length;if(u==="recent"){const Z=Math.max(...j.contacts.map(We=>We.lastContacted.getTime()));return Math.max(...B.contacts.map(We=>We.lastContacted.getTime()))-Z}return j.company.localeCompare(B.company)})},[ie,u]),_=Math.ceil($.length/ye),oe=r.useMemo(()=>{const s=(V-1)*ye;return $.slice(s,s+ye)},[$,V,ye]);r.useEffect(()=>{K(1)},[y,v]);const Ee=r.useMemo(()=>q?ke.filter(s=>s.name.toLowerCase().includes(q.toLowerCase())).slice(0,15):ke.slice(0,15),[ke,q]),us=r.useMemo(()=>M?Ae.filter(s=>s.name.toLowerCase().includes(M.toLowerCase())):Ae,[Ae,M]),_e=s=>{const m=Math.round((Date.now()-s.getTime())/864e5);return m===0?"Today":m===1?"Yesterday":m<7?`${m}d ago`:m<30?`${Math.round(m/7)}w ago`:m<365?`${Math.round(m/30)}mo ago`:`${Math.round(m/365)}y ago`},Ve=s=>{L(m=>m.includes(s)?m.filter(j=>j!==s):[...m,s])},Ke=s=>{l(m=>m.includes(s)?m.filter(j=>j!==s):[...m,s])},Ze=s=>{w(m=>m.includes(s)?m.filter(j=>j!==s):[...m,s])},ze=()=>{L([]),l([]),w([]),z("all"),p("")},ue=T.length+F.length+h.length+(P!=="all"?1:0),xs=()=>{if(!g.name||!g.email)return;const s={id:`contact-${Date.now()}`,name:g.name,email:g.email,title:g.title||null,isApproved:!0,meetingsCount:1,lastSeenAt:new Date().toISOString(),company:g.company?{id:`company-${Date.now()}`,domain:g.email.split("@")[1]||"",name:g.company,logo:null}:null},m=localStorage.getItem("spaces_contacts");let j=[];try{j=m?JSON.parse(m):[]}catch(B){console.warn("Failed to parse saved contacts, resetting:",B)}j.push(s),localStorage.setItem("spaces_contacts",JSON.stringify(j)),i({type:"ADD_CONTACT",payload:s}),b({name:"",email:"",title:"",company:""}),o(!1)};return e.jsxs("div",{className:"crm-page",children:[e.jsxs("div",{className:"crm-header",children:[e.jsxs("div",{className:"crm-title",children:[e.jsx("h1",{children:"Your Network"}),e.jsxs("p",{className:"crm-subtitle",children:[v==="companies"?e.jsxs(e.Fragment,{children:[$.length," companies",_>1&&` ‚Ä¢ Page ${V} of ${_}`]}):e.jsxs(e.Fragment,{children:[ie.length," people",U>1&&` ‚Ä¢ Page ${X} of ${U}`]}),ae>0&&e.jsxs("span",{style:{marginLeft:"0.5rem",color:"#ff6b4a"},children:["(",ae," pending)"]}),ue>0&&e.jsxs("button",{className:"clear-filters-btn",onClick:ze,children:["Clear ",ue," filter",ue>1?"s":""]})]})]}),e.jsxs("div",{className:"crm-header-actions",children:[ae>0&&e.jsx("button",{className:"btn-secondary",onClick:we,disabled:Ne,style:{marginRight:"0.5rem"},children:Ne?"Approving...":`Approve ${ae} Pending`}),e.jsx("button",{className:"btn-primary",onClick:()=>o(!0),children:"+ Add Contact"}),e.jsxs("button",{className:`filter-toggle-btn ${S?"active":""}`,onClick:()=>k(!S),children:[e.jsx("span",{children:"‚öôÔ∏è"})," Filters ",ue>0&&`(${ue})`]})]})]}),e.jsxs("div",{className:"crm-layout",children:[S&&e.jsxs("aside",{className:"crm-filters",children:[e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{className:"filter-title",children:"Last Contact"}),e.jsx("div",{className:"filter-options date-options",children:ds.map(s=>e.jsx("button",{className:`filter-chip ${P===s.value?"active":""}`,onClick:()=>z(s.value),children:s.label},s.value))})]}),e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{className:"filter-title",children:"Connection Strength"}),e.jsx("div",{className:"filter-options",children:["strong","medium","weak"].map(s=>e.jsxs("label",{className:"filter-checkbox",children:[e.jsx("input",{type:"checkbox",checked:h.includes(s),onChange:()=>Ze(s)}),e.jsxs("span",{className:`strength-label ${s}`,children:[e.jsx("span",{className:`strength-dot ${s}`}),s.charAt(0).toUpperCase()+s.slice(1)]})]},s))})]}),e.jsxs("div",{className:"filter-section",children:[e.jsxs("h3",{className:"filter-title",children:["Company",T.length>0&&e.jsx("span",{className:"filter-count",children:T.length})]}),e.jsx("input",{type:"text",className:"filter-search",placeholder:"Search companies...",value:q,onChange:s=>N(s.target.value)}),e.jsx("div",{className:"filter-list",children:Ee.map(({name:s,count:m})=>e.jsxs("label",{className:"filter-checkbox",children:[e.jsx("input",{type:"checkbox",checked:T.includes(s),onChange:()=>Ve(s)}),e.jsxs("span",{className:"filter-label-text",children:[s,e.jsx("span",{className:"filter-label-count",children:m})]})]},s))})]}),e.jsxs("div",{className:"filter-section",children:[e.jsxs("h3",{className:"filter-title",children:["Role / Title",F.length>0&&e.jsx("span",{className:"filter-count",children:F.length})]}),e.jsx("input",{type:"text",className:"filter-search",placeholder:"Search roles...",value:M,onChange:s=>G(s.target.value)}),e.jsx("div",{className:"filter-list",children:us.map(({name:s,count:m})=>e.jsxs("label",{className:"filter-checkbox",children:[e.jsx("input",{type:"checkbox",checked:F.includes(s),onChange:()=>Ke(s)}),e.jsxs("span",{className:"filter-label-text",children:[s.charAt(0).toUpperCase()+s.slice(1),e.jsx("span",{className:"filter-label-count",children:m})]})]},s))})]})]}),e.jsxs("div",{className:"crm-content",children:[e.jsxs("div",{className:"crm-toolbar",children:[e.jsxs("div",{className:"view-toggle",children:[e.jsx("button",{className:`toggle-btn ${v==="people"?"active":""}`,onClick:()=>le("people"),children:"People"}),e.jsx("button",{className:`toggle-btn ${v==="companies"?"active":""}`,onClick:()=>le("companies"),children:"Companies"}),e.jsxs("button",{className:`toggle-btn ${v==="signals"?"active":""}`,onClick:()=>le("signals"),children:["Signals ",Ce>0&&e.jsx("span",{className:"tab-badge",children:Ce})]})]}),e.jsxs("div",{className:"crm-controls",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("span",{className:"search-icon",children:"üîç"}),e.jsx("input",{type:"text",placeholder:v==="people"?"Search people...":"Search companies...",value:R,onChange:s=>p(s.target.value)})]}),e.jsxs("div",{className:"sort-controls",children:[e.jsx("button",{className:`sort-btn ${u==="recent"?"active":""}`,onClick:()=>f("recent"),children:"Recent"}),e.jsx("button",{className:`sort-btn ${u==="strength"?"active":""}`,onClick:()=>f("strength"),children:v==="people"?"Strength":"Most Contacts"}),e.jsx("button",{className:`sort-btn ${u==="name"?"active":""}`,onClick:()=>f("name"),children:"A-Z"})]})]})]}),ue>0&&e.jsxs("div",{className:"active-filters",children:[P!=="all"&&e.jsxs("span",{className:"filter-tag",children:[(Xe=ds.find(s=>s.value===P))==null?void 0:Xe.label,e.jsx("button",{onClick:()=>z("all"),children:"√ó"})]}),h.map(s=>e.jsxs("span",{className:"filter-tag",children:[s.charAt(0).toUpperCase()+s.slice(1)," connection",e.jsx("button",{onClick:()=>Ze(s),children:"√ó"})]},s)),T.map(s=>e.jsxs("span",{className:"filter-tag",children:[s,e.jsx("button",{onClick:()=>Ve(s),children:"√ó"})]},s)),F.map(s=>e.jsxs("span",{className:"filter-tag",children:[s,e.jsx("button",{onClick:()=>Ke(s),children:"√ó"})]},s))]}),v==="people"&&e.jsx(e.Fragment,{children:ie.length===0?e.jsxs("div",{className:"empty-network",children:[e.jsx("div",{className:"empty-icon",children:"üîç"}),e.jsx("h2",{children:"No results"}),e.jsx("p",{children:"Try adjusting your filters"}),ue>0&&e.jsx("button",{className:"btn-secondary",onClick:ze,children:"Clear all filters"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"contacts-grid",children:n.map(s=>e.jsxs(O,{to:`/contact/${s.id}`,className:"contact-card",children:[e.jsxs("div",{className:"contact-card-header",children:[e.jsx("div",{className:"contact-card-avatar contact-initials",children:s.name.split(" ").map(m=>m[0]).slice(0,2).join("").toUpperCase()}),e.jsx("span",{className:`strength-indicator ${s.connectionStrength}`,title:`${s.connectionStrength} connection`})]}),e.jsxs("div",{className:"contact-card-body",children:[e.jsx("h3",{className:"contact-card-name",children:s.name}),e.jsx("p",{className:"contact-card-company",children:s.company||s.companyDomain}),s.title&&e.jsx("p",{className:"contact-card-title",children:s.title})]}),e.jsxs("div",{className:"contact-card-stats",children:[e.jsxs("span",{className:"stats-meetings",children:[s.meetingsCount," meeting",s.meetingsCount!==1?"s":""]}),e.jsxs("span",{className:"stats-last",children:["Last: ",_e(s.lastContacted)]})]}),e.jsx("div",{className:"contact-card-footer",children:e.jsx("span",{className:"contact-card-email",children:s.email})})]},s.id))}),U>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>he(s=>Math.max(1,s-1)),disabled:X===1,children:"‚Üê Previous"}),e.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,U)},(s,m)=>{let j;return U<=5||X<=3?j=m+1:X>=U-2?j=U-4+m:j=X-2+m,e.jsx("button",{className:`pagination-page ${X===j?"active":""}`,onClick:()=>he(j),children:j},j)}),U>5&&X<U-2&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"pagination-ellipsis",children:"..."}),e.jsx("button",{className:"pagination-page",onClick:()=>he(U),children:U})]})]}),e.jsx("button",{className:"pagination-btn",onClick:()=>he(s=>Math.min(U,s+1)),disabled:X===U,children:"Next ‚Üí"})]})]})}),v==="companies"&&e.jsx(e.Fragment,{children:$.length===0?e.jsxs("div",{className:"empty-network",children:[e.jsx("div",{className:"empty-icon",children:"üè¢"}),e.jsx("h2",{children:"No companies found"}),e.jsx("p",{children:ie.length>0?"Your contacts don't have company information yet.":"Try adjusting your filters"}),ue>0&&e.jsx("button",{className:"btn-secondary",onClick:ze,children:"Clear all filters"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"companies-list",children:oe.map(({company:s,domain:m,contacts:j},B)=>e.jsxs("div",{className:"company-card",style:{padding:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",cursor:"pointer"},onClick:()=>C(I===s?null:s),children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#1d1d24",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#ff6b4a",fontWeight:700,fontSize:"1.25rem",flexShrink:0},children:s?s.charAt(0).toUpperCase():"?"}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{color:"#f5f5f7",fontWeight:600,fontSize:"1rem"},children:s||"Unknown Company"}),e.jsx("div",{style:{color:"#6b6b76",fontSize:"0.8rem"},children:m||"No domain"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexShrink:0},children:[e.jsxs("span",{style:{color:"#a1a1aa",fontSize:"0.85rem",background:"#1d1d24",padding:"0.25rem 0.5rem",borderRadius:"4px"},children:[j.length," contact",j.length!==1?"s":""]}),e.jsx("span",{style:{color:"#6b6b76",fontSize:"0.7rem"},children:"‚ñº"})]})]}),I===s&&e.jsx("div",{className:"company-contacts",children:j.map(Z=>e.jsxs(O,{to:`/contact/${Z.id}`,className:"company-contact-row",children:[e.jsx("div",{className:"contact-row-avatar contact-initials",children:Z.name.split(" ").map(es=>es[0]).slice(0,2).join("").toUpperCase()}),e.jsxs("div",{className:"contact-row-info",children:[e.jsx("span",{className:"contact-row-name",children:Z.name}),e.jsx("span",{className:"contact-row-email",children:Z.email}),Z.title&&e.jsx("span",{className:"contact-row-title",children:Z.title})]}),e.jsxs("div",{className:"contact-row-meta",children:[e.jsx("span",{className:`strength-badge ${Z.connectionStrength}`,children:Z.connectionStrength}),e.jsx("span",{className:"contact-row-time",children:_e(Z.lastContacted)})]})]},Z.id))})]},s||`company-${B}`))}),_>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"pagination-btn",onClick:()=>K(s=>Math.max(1,s-1)),disabled:V===1,children:"‚Üê Previous"}),e.jsxs("div",{className:"pagination-pages",children:[Array.from({length:Math.min(5,_)},(s,m)=>{let j;return _<=5||V<=3?j=m+1:V>=_-2?j=_-4+m:j=V-2+m,e.jsx("button",{className:`pagination-page ${V===j?"active":""}`,onClick:()=>K(j),children:j},j)}),_>5&&V<_-2&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"pagination-ellipsis",children:"..."}),e.jsx("button",{className:"pagination-page",onClick:()=>K(_),children:_})]})]}),e.jsx("button",{className:"pagination-btn",onClick:()=>K(s=>Math.min(_,s+1)),disabled:V===_,children:"Next ‚Üí"})]})]})}),v==="signals"&&e.jsxs("div",{className:"signals-view",children:[e.jsxs("div",{className:"signals-header",children:[e.jsxs("div",{className:"signals-header-left",children:[e.jsx("h2",{children:"Your Signals"}),e.jsxs("span",{className:"signals-count",children:[x.length," active signal",x.length!==1?"s":""]})]}),e.jsxs("div",{className:"signals-header-right",children:[Y.some(s=>!s.isRead)&&e.jsx("button",{className:"btn-text",onClick:De,children:"Mark all as read"}),e.jsx("button",{className:"btn-primary",onClick:()=>te(!0),children:"+ New Signal"})]})]}),x.length>0&&e.jsx("div",{className:"signals-pills",children:x.map(s=>e.jsxs("div",{className:`signal-pill ${s.isActive?"active":"inactive"}`,onClick:()=>me(s),style:{cursor:"pointer"},children:[e.jsx("span",{className:"signal-pill-icon",children:s.entityType==="person"?"üë§":"üè¢"}),e.jsx("span",{className:"signal-pill-name",children:s.name}),s._count&&s._count.matches>0&&e.jsx("span",{className:"signal-pill-badge",children:s._count.matches}),e.jsx("button",{className:"signal-pill-delete",onClick:m=>{m.stopPropagation(),Fe(s.id)},title:"Delete signal",children:"√ó"})]},s.id))}),se?e.jsx("div",{className:"signals-loading",children:"Loading signals..."}):Y.length===0?e.jsxs("div",{className:"signals-empty",children:[e.jsx("div",{className:"empty-icon",children:"üì°"}),e.jsx("h2",{children:"No signals triggered yet"}),e.jsx("p",{children:x.length===0?"Create your first signal to start tracking updates about your network.":"Your signals are active and monitoring. Updates will appear here."}),x.length===0&&e.jsx("button",{className:"btn-primary",onClick:()=>te(!0),children:"Create Your First Signal"})]}):e.jsx("div",{className:"signals-list",children:Y.map(s=>{var m,j,B;return e.jsxs("div",{className:`signal-match-card ${s.isRead?"read":"unread"}`,onClick:()=>!s.isRead&&Le(s.id),children:[e.jsx("div",{className:"signal-match-indicator",children:!s.isRead&&e.jsx("span",{className:"unread-dot"})}),e.jsx("div",{className:"signal-match-avatar",children:e.jsx("span",{className:"avatar-fallback",children:((j=(m=s.entity)==null?void 0:m.name)==null?void 0:j.split(" ").map(Z=>Z[0]).slice(0,2).join("").toUpperCase())||"?"})}),e.jsxs("div",{className:"signal-match-content",children:[e.jsxs("div",{className:"signal-match-header",children:[e.jsx("span",{className:"signal-match-entity",children:((B=s.entity)==null?void 0:B.name)||"Unknown"}),e.jsx("span",{className:"signal-match-signal",children:s.signal.name})]}),e.jsx("p",{className:"signal-match-summary",children:s.summary}),e.jsxs("div",{className:"signal-match-meta",children:[e.jsx("span",{className:"signal-match-type",children:s.signal.entityType==="person"?"üë§ Person":"üè¢ Company"}),e.jsx("span",{className:"signal-match-time",children:_e(new Date(s.matchedAt))})]})]})]},s.id)})})]})]})]}),ne&&e.jsx(os,{onClose:()=>te(!1),onSaved:()=>{te(!1),je()}}),re&&e.jsx(os,{signal:re,onClose:()=>me(null),onSaved:()=>{me(null),je()}}),d&&e.jsx("div",{className:"modal-overlay",onClick:()=>o(!1),children:e.jsxs("div",{className:"modal-content add-contact-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Add Contact"}),e.jsx("button",{className:"modal-close",onClick:()=>o(!1),children:"√ó"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name *"}),e.jsx("input",{type:"text",placeholder:"John Doe",value:g.name,onChange:s=>b({...g,name:s.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email *"}),e.jsx("input",{type:"email",placeholder:"john@company.com",value:g.email,onChange:s=>b({...g,email:s.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{type:"text",placeholder:"Product Manager",value:g.title,onChange:s=>b({...g,title:s.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Company"}),e.jsx("input",{type:"text",placeholder:"Acme Inc",value:g.company,onChange:s=>b({...g,company:s.target.value})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>o(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:xs,disabled:!g.name||!g.email,children:"Add Contact"})]})]})})]})}function ra(a,i){const t=Math.floor((Date.now()-new Date(a).getTime())/864e5);return t<=7&&i>=3?"strong":t<=30&&i>=2?"medium":"weak"}function la(a){const i=Math.round((Date.now()-a.getTime())/864e5);return i===0?"Today":i===1?"Yesterday":i<7?`${i} days ago`:i<30?`${Math.round(i/7)} weeks ago`:i<365?`${Math.round(i/30)} months ago`:`${Math.round(i/365)} years ago`}function oa(){const{id:a}=Je(),{contacts:i}=ee(),t=r.useMemo(()=>{var o,g,b;const d=i.find(E=>E.id===a);return d?{id:d.id,name:d.name||d.email.split("@")[0],email:d.email,title:d.title||null,company:((o=d.company)==null?void 0:o.name)||null,companyDomain:((g=d.company)==null?void 0:g.domain)||d.email.split("@")[1]||"",companyLogo:((b=d.company)==null?void 0:b.logo)||null,meetingsCount:d.meetingsCount||0,lastContacted:new Date(d.lastSeenAt),connectionStrength:ra(d.lastSeenAt,d.meetingsCount)}:null},[a,i]);if(!t)return e.jsx("div",{className:"contact-detail-page",children:e.jsxs("div",{className:"detail-empty",children:[e.jsx("h2",{children:"Contact not found"}),e.jsx(O,{to:"/network",className:"btn-primary",children:"Back to Network"})]})});const c=t.name.split(" ").map(d=>d[0]).slice(0,2).join("").toUpperCase();return e.jsxs("div",{className:"contact-detail-page",children:[e.jsx("div",{className:"contact-detail-header",children:e.jsx(O,{to:"/network",className:"back-link",children:"‚Üê Back to Network"})}),e.jsxs("div",{className:"contact-profile-card",children:[e.jsx("div",{className:"profile-banner",children:e.jsxs("div",{className:"profile-avatar-wrapper",children:[e.jsx("div",{className:"profile-avatar profile-initials",children:c}),e.jsx("span",{className:`strength-dot ${t.connectionStrength}`})]})}),e.jsxs("div",{className:"profile-info",children:[e.jsx("h1",{className:"profile-name",children:t.name}),t.title&&e.jsx("p",{className:"profile-headline",children:t.title}),t.company&&e.jsx("p",{className:"profile-company",children:t.company}),e.jsxs("div",{className:"profile-meta",children:[e.jsxs("span",{className:"meta-item",children:[t.meetingsCount," meeting",t.meetingsCount!==1?"s":""]}),e.jsx("span",{className:"meta-divider",children:"¬∑"}),e.jsxs("span",{className:`connection-strength ${t.connectionStrength}`,children:[t.connectionStrength," connection"]})]}),e.jsx("div",{className:"profile-actions",children:e.jsx("a",{href:`mailto:${t.email}`,className:"btn-primary",children:"Send Email"})})]})]}),e.jsxs("div",{className:"contact-section",children:[e.jsx("h2",{children:"Contact Info"}),e.jsxs("div",{className:"contact-info-list",children:[e.jsxs("div",{className:"contact-info-item",children:[e.jsx("span",{className:"contact-info-label",children:"Email"}),e.jsx("a",{href:`mailto:${t.email}`,className:"contact-info-value link",children:t.email})]}),t.company&&e.jsxs("div",{className:"contact-info-item",children:[e.jsx("span",{className:"contact-info-label",children:"Company"}),e.jsx("span",{className:"contact-info-value",children:t.company})]}),t.companyDomain&&e.jsxs("div",{className:"contact-info-item",children:[e.jsx("span",{className:"contact-info-label",children:"Domain"}),e.jsx("span",{className:"contact-info-value",children:t.companyDomain})]}),t.title&&e.jsxs("div",{className:"contact-info-item",children:[e.jsx("span",{className:"contact-info-label",children:"Title"}),e.jsx("span",{className:"contact-info-value",children:t.title})]})]})]}),e.jsxs("div",{className:"contact-section",children:[e.jsx("h2",{children:"Connection History"}),e.jsxs("div",{className:"contact-info-list",children:[e.jsxs("div",{className:"contact-info-item",children:[e.jsx("span",{className:"contact-info-label",children:"Total Meetings"}),e.jsx("span",{className:"contact-info-value",children:t.meetingsCount})]}),e.jsxs("div",{className:"contact-info-item",children:[e.jsx("span",{className:"contact-info-label",children:"Last Contact"}),e.jsx("span",{className:"contact-info-value",children:la(t.lastContacted)})]}),e.jsxs("div",{className:"contact-info-item",children:[e.jsx("span",{className:"contact-info-label",children:"Connection Strength"}),e.jsx("span",{className:`contact-info-value connection-strength ${t.connectionStrength}`,children:t.connectionStrength.charAt(0).toUpperCase()+t.connectionStrength.slice(1)})]})]})]}),t.company&&e.jsxs("div",{className:"contact-section",children:[e.jsx("h2",{children:"Company"}),e.jsxs("div",{className:"company-link-card",children:[e.jsx("div",{className:"company-link-logo",children:t.companyLogo?e.jsx("img",{src:t.companyLogo,alt:""}):t.company.charAt(0)}),e.jsxs("div",{className:"company-link-info",children:[e.jsx("span",{className:"company-link-name",children:t.company}),e.jsx("span",{className:"company-link-domain",children:t.companyDomain})]})]})]})]})}function da(){const a=xe(),{isAuthenticated:i,isLoading:t}=ee();r.useEffect(()=>{i&&!t&&a("/home")},[i,t,a]);const c=()=>{window.location.href="/auth/google"};return e.jsxs("div",{className:"landing-v2",children:[e.jsxs("nav",{className:"nav-v2",children:[e.jsx("div",{className:"nav-brand",children:"Introo"}),e.jsx("button",{className:"nav-signin",onClick:c,children:"Sign in ‚Üí"})]}),e.jsxs("div",{className:"landing-main",children:[e.jsxs("div",{className:"landing-left",children:[e.jsxs("h1",{children:["Share intros.",e.jsx("br",{}),"Grow together."]}),e.jsx("p",{children:"Join trusted communities, share your network, and get warm introductions to the people you want to meet."}),e.jsxs("button",{className:"hero-btn",onClick:c,children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Get Started"]})]}),e.jsx("div",{className:"landing-right",children:e.jsxs("div",{className:"landing-features",children:[e.jsxs("div",{className:"landing-feature",children:[e.jsx("span",{className:"feature-icon",children:"üë•"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Join communities"}),e.jsx("span",{children:"Connect with founders, investors, and peers"})]})]}),e.jsxs("div",{className:"landing-feature",children:[e.jsx("span",{className:"feature-icon",children:"ü§ù"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Share your network"}),e.jsx("span",{children:"Help others with intros you can make"})]})]}),e.jsxs("div",{className:"landing-feature",children:[e.jsx("span",{className:"feature-icon",children:"‚ú®"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Get warm intros"}),e.jsx("span",{children:"No more cold emails ‚Äî just trusted connections"})]})]})]})})]}),e.jsxs("footer",{className:"footer-v2",children:[e.jsx("span",{children:"¬© 2026 Aspeen Inc."}),e.jsx("span",{children:"¬∑"}),e.jsx(O,{to:"/terms",children:"Terms"}),e.jsx("span",{children:"¬∑"}),e.jsx(O,{to:"/privacy",children:"Privacy"})]})]})}function ma(){return e.jsxs("div",{className:"legal-page",children:[e.jsx("nav",{className:"legal-nav",children:e.jsx(O,{to:"/",className:"legal-brand",children:"Introo"})}),e.jsxs("div",{className:"legal-content",children:[e.jsx("h1",{children:"Terms of Use"}),e.jsx("p",{className:"legal-updated",children:"Last updated: February 10, 2024"}),e.jsxs("section",{children:[e.jsx("h2",{children:"1. Agreement to Terms"}),e.jsx("p",{children:'By accessing or using Introo ("Service"), operated by Aspeen Inc. ("Company", "we", "us", or "our"), you agree to be bound by these Terms of Use ("Terms"). If you disagree with any part of these terms, you may not access the Service.'})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"2. Description of Service"}),e.jsx("p",{children:"Introo is a professional networking platform that helps users discover connections within their network and facilitate warm introductions. The Service allows users to:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Connect their Google Calendar to identify professional relationships"}),e.jsx("li",{children:'Join private communities ("Spaces") with trusted peers'}),e.jsx("li",{children:"Request and provide introductions to other professionals"}),e.jsx("li",{children:"Manage their professional network"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"3. Google Calendar Access"}),e.jsx("p",{children:"To use certain features of the Service, you may choose to connect your Google Calendar. By doing so, you authorize us to:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Access your calendar event metadata (attendees, dates, event titles)"}),e.jsx("li",{children:"Analyze meeting patterns to identify your professional network"}),e.jsx("li",{children:"Store derived relationship data to power intro matching"})]}),e.jsx("p",{children:"We do not read, store, or access the content of your calendar events beyond metadata. You can revoke this access at any time through your Google Account settings."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"4. User Accounts"}),e.jsx("p",{children:"You are responsible for maintaining the confidentiality of your account and for all activities that occur under your account. You agree to:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Provide accurate and complete information when creating an account"}),e.jsx("li",{children:"Keep your account credentials secure"}),e.jsx("li",{children:"Notify us immediately of any unauthorized use of your account"}),e.jsx("li",{children:"Accept responsibility for all activities under your account"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"5. Acceptable Use"}),e.jsx("p",{children:"You agree not to use the Service to:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Violate any applicable laws or regulations"}),e.jsx("li",{children:"Harass, abuse, or harm other users"}),e.jsx("li",{children:"Send spam or unsolicited communications"}),e.jsx("li",{children:"Impersonate others or misrepresent your affiliation"}),e.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),e.jsx("li",{children:"Use automated means to access the Service without permission"}),e.jsx("li",{children:"Share false or misleading information about your network"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"6. User Content"}),e.jsx("p",{children:"You retain ownership of content you submit to the Service. By submitting content, you grant us a non-exclusive, worldwide, royalty-free license to use, display, and distribute your content in connection with operating the Service."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"7. Privacy"}),e.jsxs("p",{children:["Your use of the Service is also governed by our ",e.jsx(O,{to:"/privacy",children:"Privacy Policy"}),". Please review our Privacy Policy to understand our practices regarding your personal information."]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"8. Intellectual Property"}),e.jsx("p",{children:"The Service and its original content, features, and functionality are owned by Aspeen Inc. and are protected by international copyright, trademark, and other intellectual property laws."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"9. Termination"}),e.jsx("p",{children:"We may terminate or suspend your account and access to the Service immediately, without prior notice or liability, for any reason, including breach of these Terms. Upon termination, your right to use the Service will cease immediately."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"10. Disclaimer of Warranties"}),e.jsx("p",{children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. WE DO NOT GUARANTEE THAT THE SERVICE WILL BE UNINTERRUPTED, SECURE, OR ERROR-FREE.'})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"11. Limitation of Liability"}),e.jsx("p",{children:"IN NO EVENT SHALL ASPEEN INC., ITS DIRECTORS, EMPLOYEES, PARTNERS, OR AFFILIATES BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES ARISING FROM YOUR USE OF THE SERVICE."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"12. Changes to Terms"}),e.jsx("p",{children:'We reserve the right to modify these Terms at any time. We will notify users of any material changes by posting the new Terms on this page and updating the "Last updated" date. Your continued use of the Service after changes constitutes acceptance of the new Terms.'})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"13. Contact Us"}),e.jsx("p",{children:"If you have any questions about these Terms, please contact us at:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Aspeen Inc."}),e.jsx("br",{}),"Email: legal@introo.app"]})]})]}),e.jsxs("footer",{className:"legal-footer",children:[e.jsx(O,{to:"/",children:"‚Üê Back to Introo"}),e.jsx("span",{children:"¬∑"}),e.jsx(O,{to:"/privacy",children:"Privacy Policy"})]})]})}function ha(){return e.jsxs("div",{className:"legal-page",children:[e.jsx("nav",{className:"legal-nav",children:e.jsx(O,{to:"/",className:"legal-brand",children:"Introo"})}),e.jsxs("div",{className:"legal-content",children:[e.jsx("h1",{children:"Privacy Policy"}),e.jsx("p",{className:"legal-updated",children:"Last updated: February 10, 2024"}),e.jsxs("section",{children:[e.jsx("h2",{children:"1. Introduction"}),e.jsx("p",{children:'Aspeen Inc. ("Company", "we", "us", or "our") operates Introo (the "Service"). This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our Service.'}),e.jsx("p",{children:"We take your privacy seriously. Please read this Privacy Policy carefully. By using the Service, you agree to the collection and use of information in accordance with this policy."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"2. Information We Collect"}),e.jsx("h3",{children:"2.1 Information You Provide"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Account Information:"})," Name, email address, and profile photo from your Google account"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Profile Information:"})," Professional information you choose to add to your profile"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Communications:"})," Messages and intro requests you send through the Service"]})]}),e.jsx("h3",{children:"2.2 Google Calendar Data"}),e.jsx("p",{children:"When you connect your Google Calendar, we access and process the following data:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Event Metadata:"})," Event titles, dates, times, and attendee email addresses"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Meeting Patterns:"})," Frequency and recency of meetings with contacts"]})]}),e.jsx("p",{children:e.jsx("strong",{children:"What we DO NOT access:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"Event descriptions or notes"}),e.jsx("li",{children:"Event attachments or documents"}),e.jsx("li",{children:"Location details"}),e.jsx("li",{children:"Private or confidential event content"})]}),e.jsx("h3",{children:"2.3 Automatically Collected Information"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Device information (browser type, operating system)"}),e.jsx("li",{children:"Usage data (pages visited, features used)"}),e.jsx("li",{children:"IP address and general location"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"3. How We Use Your Information"}),e.jsx("p",{children:"We use the information we collect to:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Provide and maintain the Service"}),e.jsx("li",{children:"Create your professional network map based on calendar data"}),e.jsx("li",{children:"Match you with community members who can provide introductions"}),e.jsx("li",{children:"Facilitate intro requests between users"}),e.jsx("li",{children:"Send you important updates about the Service"}),e.jsx("li",{children:"Improve and optimize the Service"}),e.jsx("li",{children:"Detect and prevent fraud or abuse"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"4. Google API Services User Data Policy"}),e.jsxs("p",{children:["Our use and transfer of information received from Google APIs adheres to the",e.jsx("a",{href:"https://developers.google.com/terms/api-services-user-data-policy",target:"_blank",rel:"noopener noreferrer",children:" Google API Services User Data Policy"}),", including the Limited Use requirements."]}),e.jsx("p",{children:"Specifically:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"We only use Google Calendar data to provide the intro matching features you've requested"}),e.jsx("li",{children:"We do not sell, rent, or share your Google data with third parties for advertising"}),e.jsx("li",{children:"We do not use Google data for purposes unrelated to the Service's core functionality"}),e.jsx("li",{children:"Human access to your Google data is limited to necessary support and legal compliance"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"5. Data Sharing and Disclosure"}),e.jsx("p",{children:"We may share your information in the following situations:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"With Your Consent:"})," When you explicitly agree to share information"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Within Communities:"})," Limited profile information is visible to members of Spaces you join"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"For Introductions:"})," Relevant contact information shared when facilitating intros"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Service Providers:"})," With trusted vendors who assist in operating our Service"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Legal Requirements:"})," When required by law or to protect our rights"]})]}),e.jsx("p",{children:e.jsx("strong",{children:"We do not sell your personal information to third parties."})})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"6. Data Security"}),e.jsx("p",{children:"We implement appropriate technical and organizational security measures to protect your personal information, including:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Encryption of data in transit (TLS/SSL)"}),e.jsx("li",{children:"Encryption of sensitive data at rest"}),e.jsx("li",{children:"Regular security assessments"}),e.jsx("li",{children:"Access controls and authentication"}),e.jsx("li",{children:"Secure cloud infrastructure"})]}),e.jsx("p",{children:"However, no method of transmission over the Internet is 100% secure. We cannot guarantee absolute security of your data."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"7. Data Retention"}),e.jsx("p",{children:"We retain your personal information for as long as your account is active or as needed to provide you with the Service. You can request deletion of your data at any time by contacting us."}),e.jsx("p",{children:"When you disconnect your Google Calendar or delete your account:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"We stop accessing your Google Calendar data immediately"}),e.jsx("li",{children:"Derived network data is deleted within 30 days"}),e.jsx("li",{children:"Account information is deleted upon request"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"8. Your Rights and Choices"}),e.jsx("p",{children:"You have the right to:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Correction:"})," Request correction of inaccurate data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Deletion:"})," Request deletion of your data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Portability:"})," Request your data in a portable format"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Revoke Access:"})," Disconnect Google Calendar at any time via Google Account settings"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Opt-out:"})," Opt out of non-essential communications"]})]}),e.jsx("p",{children:"To exercise these rights, contact us at privacy@introo.app."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"9. Children's Privacy"}),e.jsx("p",{children:"The Service is not intended for users under 18 years of age. We do not knowingly collect personal information from children. If we discover that a child has provided us with personal information, we will delete it immediately."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"10. International Data Transfers"}),e.jsx("p",{children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your information in accordance with this Privacy Policy."})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"11. Changes to This Privacy Policy"}),e.jsx("p",{children:'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new Privacy Policy on this page and updating the "Last updated" date. We encourage you to review this Privacy Policy periodically.'})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"12. Contact Us"}),e.jsx("p",{children:"If you have any questions about this Privacy Policy or our data practices, please contact us at:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Aspeen Inc."}),e.jsx("br",{}),"Email: privacy@introo.app"]}),e.jsxs("p",{children:["For Google-related data inquiries, you may also manage your connected apps at:",e.jsx("br",{}),e.jsx("a",{href:"https://myaccount.google.com/permissions",target:"_blank",rel:"noopener noreferrer",children:"https://myaccount.google.com/permissions"})]})]})]}),e.jsxs("footer",{className:"legal-footer",children:[e.jsx(O,{to:"/",children:"‚Üê Back to Introo"}),e.jsx("span",{children:"¬∑"}),e.jsx(O,{to:"/terms",children:"Terms of Use"})]})]})}function pa(){return e.jsx($s,{children:e.jsx(ys,{children:e.jsxs(bs,{children:[e.jsx(J,{path:"/",element:e.jsx(da,{})}),e.jsx(J,{path:"/login",element:e.jsx(Vs,{})}),e.jsx(J,{path:"/terms",element:e.jsx(ma,{})}),e.jsx(J,{path:"/privacy",element:e.jsx(ha,{})}),e.jsx(J,{path:"/onboarding",element:e.jsx(Ks,{})}),e.jsx(J,{path:"/home",element:e.jsx(ce,{children:e.jsx(ta,{})})}),e.jsx(J,{path:"/dashboard",element:e.jsx(ce,{children:e.jsx(_s,{})})}),e.jsx(J,{path:"/network",element:e.jsx(ce,{children:e.jsx(ca,{})})}),e.jsx(J,{path:"/spaces",element:e.jsx(ce,{children:e.jsx(Zs,{})})}),e.jsx(J,{path:"/spaces/new",element:e.jsx(ce,{children:e.jsx(ea,{})})}),e.jsx(J,{path:"/spaces/:id",element:e.jsx(ce,{children:e.jsx(aa,{})})}),e.jsx(J,{path:"/request/new",element:e.jsx(ce,{children:e.jsx(Hs,{})})}),e.jsx(J,{path:"/request/:id",element:e.jsx(ce,{children:e.jsx(Js,{})})}),e.jsx(J,{path:"/contact/:id",element:e.jsx(ce,{children:e.jsx(oa,{})})}),e.jsx(J,{path:"/connect",element:e.jsx(ce,{children:e.jsx(Os,{})})})]})})})}He.createRoot(document.getElementById("root")).render(e.jsx(vs.StrictMode,{children:e.jsx(Rs,{children:e.jsx(pa,{})})}));
